/**
 * @license RequireJS text 2.0.0 Copyright (c) 2010-2012, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/requirejs/text for details
 */

/* ===================================================
 * bootstrap-transition.js v2.0.4
 * http://twitter.github.com/bootstrap/javascript.html#transitions
 * ===================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ========================================================== */

/* ==========================================================
 * bootstrap-alert.js v2.0.4
 * http://twitter.github.com/bootstrap/javascript.html#alerts
 * ==========================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ========================================================== */

/* ============================================================
 * bootstrap-button.js v2.0.4
 * http://twitter.github.com/bootstrap/javascript.html#buttons
 * ============================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ============================================================ */

/* ==========================================================
 * bootstrap-carousel.js v2.0.4
 * http://twitter.github.com/bootstrap/javascript.html#carousel
 * ==========================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ========================================================== */

/* =============================================================
 * bootstrap-collapse.js v2.0.4
 * http://twitter.github.com/bootstrap/javascript.html#collapse
 * =============================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ============================================================ */

/* ============================================================
 * bootstrap-dropdown.js v2.0.4
 * http://twitter.github.com/bootstrap/javascript.html#dropdowns
 * ============================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ============================================================ */

/* =========================================================
 * bootstrap-modal.js v2.0.4
 * http://twitter.github.com/bootstrap/javascript.html#modals
 * =========================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ========================================================= */

/* ===========================================================
 * bootstrap-tooltip.js v2.0.4
 * http://twitter.github.com/bootstrap/javascript.html#tooltips
 * Inspired by the original jQuery.tipsy by Jason Frame
 * ===========================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ========================================================== */

/* ===========================================================
 * bootstrap-popover.js v2.0.4
 * http://twitter.github.com/bootstrap/javascript.html#popovers
 * ===========================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =========================================================== */

/* =============================================================
 * bootstrap-scrollspy.js v2.0.4
 * http://twitter.github.com/bootstrap/javascript.html#scrollspy
 * =============================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ============================================================== */

/* ========================================================
 * bootstrap-tab.js v2.0.4
 * http://twitter.github.com/bootstrap/javascript.html#tabs
 * ========================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ======================================================== */

/* =============================================================
 * bootstrap-typeahead.js v2.0.4
 * http://twitter.github.com/bootstrap/javascript.html#typeahead
 * =============================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ============================================================ */

(function(){var $,Controller,Events,Log,Model,Module,Spine,createObject,isArray,isBlank,makeArray,moduleKeywords,__slice=[].slice,__indexOf=[].indexOf||function(item){for(var i=0,l=this.length;i<l;i++)if(i in this&&this[i]===item)return i;return-1},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},__bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Events={bind:function(ev,callback){var calls,evs,name,_i,_len;evs=ev.split(" "),calls=this.hasOwnProperty("_callbacks")&&this._callbacks||(this._callbacks={});for(_i=0,_len=evs.length;_i<_len;_i++)name=evs[_i],calls[name]||(calls[name]=[]),calls[name].push(callback);return this},one:function(ev,callback){return this.bind(ev,function(){return this.unbind(ev,arguments.callee),callback.apply(this,arguments)})},trigger:function(){var args,callback,ev,list,_i,_len,_ref;args=1<=arguments.length?__slice.call(arguments,0):[],ev=args.shift(),list=this.hasOwnProperty("_callbacks")&&((_ref=this._callbacks)!=null?_ref[ev]:void 0);if(!list)return;for(_i=0,_len=list.length;_i<_len;_i++){callback=list[_i];if(callback.apply(this,args)===!1)break}return!0},unbind:function(ev,callback){var cb,i,list,_i,_len,_ref;if(!ev)return this._callbacks={},this;list=(_ref=this._callbacks)!=null?_ref[ev]:void 0;if(!list)return this;if(!callback)return delete this._callbacks[ev],this;for(i=_i=0,_len=list.length;_i<_len;i=++_i){cb=list[i];if(cb!==callback)continue;list=list.slice(),list.splice(i,1),this._callbacks[ev]=list;break}return this}},Log={trace:!0,logPrefix:"(App)",log:function(){var args;args=1<=arguments.length?__slice.call(arguments,0):[];if(!this.trace)return;return this.logPrefix&&args.unshift(this.logPrefix),typeof console!="undefined"&&console!==null&&typeof console.log=="function"&&console.log.apply(console,args),this}},moduleKeywords=["included","extended"],Module=function(){function Module(){typeof this.init=="function"&&this.init.apply(this,arguments)}return Module.include=function(obj){var key,value,_ref;if(!obj)throw new Error("include(obj) requires obj");for(key in obj)value=obj[key],__indexOf.call(moduleKeywords,key)<0&&(this.prototype[key]=value);return(_ref=obj.included)!=null&&_ref.apply(this),this},Module.extend=function(obj){var key,value,_ref;if(!obj)throw new Error("extend(obj) requires obj");for(key in obj)value=obj[key],__indexOf.call(moduleKeywords,key)<0&&(this[key]=value);return(_ref=obj.extended)!=null&&_ref.apply(this),this},Module.proxy=function(func){var _this=this;return function(){return func.apply(_this,arguments)}},Module.prototype.proxy=function(func){var _this=this;return function(){return func.apply(_this,arguments)}},Module}(),Model=function(_super){function Model(atts){Model.__super__.constructor.apply(this,arguments),atts&&this.load(atts),this.cid=this.constructor.uid("c-")}return __extends(Model,_super),Model.extend(Events),Model.records={},Model.crecords={},Model.attributes=[],Model.configure=function(){var attributes,name;return name=arguments[0],attributes=2<=arguments.length?__slice.call(arguments,1):[],this.className=name,this.records={},this.crecords={},attributes.length&&(this.attributes=attributes),this.attributes&&(this.attributes=makeArray(this.attributes)),this.attributes||(this.attributes=[]),this.unbind(),this},Model.toString=function(){return""+this.className+"("+this.attributes.join(", ")+")"},Model.find=function(id){var record;record=this.records[id];if(!record&&(""+id).match(/c-\d+/))return this.findCID(id);if(!record)throw new Error("Unknown record");return record.clone()},Model.findCID=function(cid){var record;record=this.crecords[cid];if(!record)throw new Error("Unknown record");return record.clone()},Model.exists=function(id){try{return this.find(id)}catch(e){return!1}},Model.refresh=function(values,options){var record,records,_i,_len;options==null&&(options={}),options.clear&&(this.records={},this.crecords={}),records=this.fromJSON(values),isArray(records)||(records=[records]);for(_i=0,_len=records.length;_i<_len;_i++)record=records[_i],record.id||(record.id=record.cid),this.records[record.id]=record,this.crecords[record.cid]=record;return this.trigger("refresh",this.cloneArray(records)),this},Model.select=function(callback){var id,record,result;return result=function(){var _ref,_results;_ref=this.records,_results=[];for(id in _ref)record=_ref[id],callback(record)&&_results.push(record);return _results}.call(this),this.cloneArray(result)},Model.findByAttribute=function(name,value){var id,record,_ref;_ref=this.records;for(id in _ref){record=_ref[id];if(record[name]===value)return record.clone()}return null},Model.findAllByAttribute=function(name,value){return this.select(function(item){return item[name]===value})},Model.each=function(callback){var key,value,_ref,_results;_ref=this.records,_results=[];for(key in _ref)value=_ref[key],_results.push(callback(value.clone()));return _results},Model.all=function(){return this.cloneArray(this.recordsValues())},Model.first=function(){var record;return record=this.recordsValues()[0],record!=null?record.clone():void 0},Model.last=function(){var record,values;return values=this.recordsValues(),record=values[values.length-1],record!=null?record.clone():void 0},Model.count=function(){return this.recordsValues().length},Model.deleteAll=function(){var key,value,_ref,_results;_ref=this.records,_results=[];for(key in _ref)value=_ref[key],_results.push(delete this.records[key]);return _results},Model.destroyAll=function(){var key,value,_ref,_results;_ref=this.records,_results=[];for(key in _ref)value=_ref[key],_results.push(this.records[key].destroy());return _results},Model.update=function(id,atts,options){return this.find(id).updateAttributes(atts,options)},Model.create=function(atts,options){var record;return record=new this(atts),record.save(options)},Model.destroy=function(id,options){return this.find(id).destroy(options)},Model.change=function(callbackOrParams){return typeof callbackOrParams=="function"?this.bind("change",callbackOrParams):this.trigger("change",callbackOrParams)},Model.fetch=function(callbackOrParams){return typeof callbackOrParams=="function"?this.bind("fetch",callbackOrParams):this.trigger("fetch",callbackOrParams)},Model.toJSON=function(){return this.recordsValues()},Model.fromJSON=function(objects){var value,_i,_len,_results;if(!objects)return;typeof objects=="string"&&(objects=JSON.parse(objects));if(isArray(objects)){_results=[];for(_i=0,_len=objects.length;_i<_len;_i++)value=objects[_i],_results.push(new this(value));return _results}return new this(objects)},Model.fromForm=function(){var _ref;return(_ref=new this).fromForm.apply(_ref,arguments)},Model.recordsValues=function(){var key,result,value,_ref;result=[],_ref=this.records;for(key in _ref)value=_ref[key],result.push(value);return result},Model.cloneArray=function(array){var value,_i,_len,_results;_results=[];for(_i=0,_len=array.length;_i<_len;_i++)value=array[_i],_results.push(value.clone());return _results},Model.idCounter=0,Model.uid=function(prefix){var uid;return prefix==null&&(prefix=""),uid=prefix+this.idCounter++,this.exists(uid)&&(uid=this.uid(prefix)),uid},Model.prototype.isNew=function(){return!this.exists()},Model.prototype.isValid=function(){return!this.validate()},Model.prototype.validate=function(){},Model.prototype.load=function(atts){var key,value;for(key in atts)value=atts[key],typeof this[key]=="function"?this[key](value):this[key]=value;return this},Model.prototype.attributes=function(){var key,result,_i,_len,_ref;result={},_ref=this.constructor.attributes;for(_i=0,_len=_ref.length;_i<_len;_i++)key=_ref[_i],key in this&&(typeof this[key]=="function"?result[key]=this[key]():result[key]=this[key]);return this.id&&(result.id=this.id),result},Model.prototype.eql=function(rec){return!!(rec&&rec.constructor===this.constructor&&rec.cid===this.cid||rec.id&&rec.id===this.id)},Model.prototype.save=function(options){var error,record;options==null&&(options={});if(options.validate!==!1){error=this.validate();if(error)return this.trigger("error",error),!1}return this.trigger("beforeSave",options),record=this.isNew()?this.create(options):this.update(options),this.trigger("save",options),record},Model.prototype.updateAttribute=function(name,value,options){return this[name]=value,this.save(options)},Model.prototype.updateAttributes=function(atts,options){return this.load(atts),this.save(options)},Model.prototype.changeID=function(id){var records;return records=this.constructor.records,records[id]=records[this.id],delete records[this.id],this.id=id,this.save()},Model.prototype.destroy=function(options){return options==null&&(options={}),this.trigger("beforeDestroy",options),delete this.constructor.records[this.id],delete this.constructor.crecords[this.cid],this.destroyed=!0,this.trigger("destroy",options),this.trigger("change","destroy",options),this.unbind(),this},Model.prototype.dup=function(newRecord){var result;return result=new this.constructor(this.attributes()),newRecord===!1?result.cid=this.cid:delete result.id,result},Model.prototype.clone=function(){return createObject(this)},Model.prototype.reload=function(){var original;return this.isNew()?this:(original=this.constructor.find(this.id),this.load(original.attributes()),original)},Model.prototype.toJSON=function(){return this.attributes()},Model.prototype.toString=function(){return"<"+this.constructor.className+" ("+JSON.stringify(this)+")>"},Model.prototype.fromForm=function(form){var key,result,_i,_len,_ref;result={},_ref=$(form).serializeArray();for(_i=0,_len=_ref.length;_i<_len;_i++)key=_ref[_i],result[key.name]=key.value;return this.load(result)},Model.prototype.exists=function(){return this.id&&this.id in this.constructor.records},Model.prototype.update=function(options){var clone,records;return this.trigger("beforeUpdate",options),records=this.constructor.records,records[this.id].load(this.attributes()),clone=records[this.id].clone(),clone.trigger("update",options),clone.trigger("change","update",options),clone},Model.prototype.create=function(options){var clone,record;return this.trigger("beforeCreate",options),this.id||(this.id=this.cid),record=this.dup(!1),this.constructor.records[this.id]=record,this.constructor.crecords[this.cid]=record,clone=record.clone(),clone.trigger("create",options),clone.trigger("change","create",options),clone},Model.prototype.bind=function(events,callback){var binder,unbinder,_this=this;return this.constructor.bind(events,binder=function(record){if(record&&_this.eql(record))return callback.apply(_this,arguments)}),this.constructor.bind("unbind",unbinder=function(record){if(record&&_this.eql(record))return _this.constructor.unbind(events,binder),_this.constructor.unbind("unbind",unbinder)}),binder},Model.prototype.one=function(events,callback){var binder,_this=this;return binder=this.bind(events,function(){return _this.constructor.unbind(events,binder),callback.apply(_this,arguments)})},Model.prototype.trigger=function(){var args,_ref;return args=1<=arguments.length?__slice.call(arguments,0):[],args.splice(1,0,this),(_ref=this.constructor).trigger.apply(_ref,args)},Model.prototype.unbind=function(){return this.trigger("unbind")},Model}(Module),Controller=function(_super){function Controller(options){this.release=__bind(this.release,this);var key,value,_ref;this.options=options,_ref=this.options;for(key in _ref)value=_ref[key],this[key]=value;this.el||(this.el=document.createElement(this.tag)),this.el=$(this.el),this.$el=this.el,this.className&&this.el.addClass(this.className),this.attributes&&this.el.attr(this.attributes),this.events||(this.events=this.constructor.events),this.elements||(this.elements=this.constructor.elements),this.events&&this.delegateEvents(this.events),this.elements&&this.refreshElements(),Controller.__super__.constructor.apply(this,arguments)}return __extends(Controller,_super),Controller.include(Events),Controller.include(Log),Controller.prototype.eventSplitter=/^(\S+)\s*(.*)$/,Controller.prototype.tag="div",Controller.prototype.release=function(){return this.trigger("release"),this.el.remove(),this.unbind()},Controller.prototype.$=function(selector){return $(selector,this.el)},Controller.prototype.delegateEvents=function(events){var eventName,key,match,method,selector,_results,_this=this;_results=[];for(key in events){method=events[key];if(typeof method=="function")method=function(method){return function(){return method.apply(_this,arguments),!0}}(method);else{if(!this[method])throw new Error(""+method+" doesn't exist");method=function(method){return function(){return _this[method].apply(_this,arguments),!0}}(method)}match=key.match(this.eventSplitter),eventName=match[1],selector=match[2],selector===""?_results.push(this.el.bind(eventName,method)):_results.push(this.el.delegate(selector,eventName,method))}return _results},Controller.prototype.refreshElements=function(){var key,value,_ref,_results;_ref=this.elements,_results=[];for(key in _ref)value=_ref[key],_results.push(this[value]=this.$(key));return _results},Controller.prototype.delay=function(func,timeout){return setTimeout(this.proxy(func),timeout||0)},Controller.prototype.html=function(element){return this.el.html(element.el||element),this.refreshElements(),this.el},Controller.prototype.append=function(){var e,elements,_ref;return elements=1<=arguments.length?__slice.call(arguments,0):[],elements=function(){var _i,_len,_results;_results=[];for(_i=0,_len=elements.length;_i<_len;_i++)e=elements[_i],_results.push(e.el||e);return _results}(),(_ref=this.el).append.apply(_ref,elements),this.refreshElements(),this.el},Controller.prototype.appendTo=function(element){return this.el.appendTo(element.el||element),this.refreshElements(),this.el},Controller.prototype.prepend=function(){var e,elements,_ref;return elements=1<=arguments.length?__slice.call(arguments,0):[],elements=function(){var _i,_len,_results;_results=[];for(_i=0,_len=elements.length;_i<_len;_i++)e=elements[_i],_results.push(e.el||e);return _results}(),(_ref=this.el).prepend.apply(_ref,elements),this.refreshElements(),this.el},Controller.prototype.replace=function(element){var previous,_ref;return _ref=[this.el,$(element.el||element)],previous=_ref[0],this.el=_ref[1],previous.replaceWith(this.el),this.delegateEvents(this.events),this.refreshElements(),this.el},Controller}(Module),$=(typeof window!="undefined"&&window!==null?window.jQuery:void 0)||(typeof window!="undefined"&&window!==null?window.Zepto:void 0)||function(element){return element},createObject=Object.create||function(o){var Func;return Func=function(){},Func.prototype=o,new Func},isArray=function(value){return Object.prototype.toString.call(value)==="[object Array]"},isBlank=function(value){var key;if(!value)return!0;for(key in value)return!1;return!0},makeArray=function(args){return Array.prototype.slice.call(args,0)},Spine=this.Spine={},typeof module!="undefined"&&module!==null&&(module.exports=Spine),Spine.version="1.0.8",Spine.isArray=isArray,Spine.isBlank=isBlank,Spine.$=$,Spine.Events=Events,Spine.Log=Log,Spine.Module=Module,Spine.Controller=Controller,Spine.Model=Model,Module.extend.call(Spine,Events),Module.create=Module.sub=Controller.create=Controller.sub=Model.sub=function(instances,statics){var result;return result=function(_super){function result(){return result.__super__.constructor.apply(this,arguments)}return __extends(result,_super),result}(this),instances&&result.include(instances),statics&&result.extend(statics),typeof result.unbind=="function"&&result.unbind(),result},Model.setup=function(name,attributes){var Instance;return attributes==null&&(attributes=[]),Instance=function(_super){function Instance(){return Instance.__super__.constructor.apply(this,arguments)}return __extends(Instance,_super),Instance}(this),Instance.configure.apply(Instance,[name].concat(__slice.call(attributes))),Instance},Spine.Class=Module}).call(this),define("lib/spine/spine",function(){}),function(){var $,Ajax,Base,Collection,Extend,Include,Model,Singleton,Spine,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},__slice=[].slice;Spine=this.Spine||require("spine"),$=Spine.$,Model=Spine.Model,Ajax={getURL:function(object){return object&&(typeof object.url=="function"?object.url():void 0)||object.url},enabled:!0,pending:!1,requests:[],disable:function(callback){if(!this.enabled)return callback();this.enabled=!1;try{return callback()}catch(e){throw e}finally{this.enabled=!0}},requestNext:function(){var next;return next=this.requests.shift(),next?this.request(next):this.pending=!1},request:function(callback){var _this=this;return callback().complete(function(){return _this.requestNext()})},queue:function(callback){if(!this.enabled)return;return this.pending?this.requests.push(callback):(this.pending=!0,this.request(callback)),callback}},Base=function(){function Base(){}return Base.prototype.defaults={contentType:"application/json",dataType:"json",processData:!1,headers:{"X-Requested-With":"XMLHttpRequest"}},Base.prototype.ajax=function(params,defaults){return $.ajax($.extend({},this.defaults,defaults,params))},Base.prototype.queue=function(callback){return Ajax.queue(callback)},Base}(),Collection=function(_super){function Collection(model){this.model=model,this.errorResponse=__bind(this.errorResponse,this),this.recordsResponse=__bind(this.recordsResponse,this)}return __extends(Collection,_super),Collection.prototype.find=function(id,params){var record;return record=new this.model({id:id}),this.ajax(params,{type:"GET",url:Ajax.getURL(record)}).success(this.recordsResponse).error(this.errorResponse)},Collection.prototype.all=function(params){return this.ajax(params,{type:"GET",url:Ajax.getURL(this.model)}).success(this.recordsResponse).error(this.errorResponse)},Collection.prototype.fetch=function(params,options){var id,_this=this;return params==null&&(params={}),options==null&&(options={}),(id=params.id)?(delete params.id,this.find(id,params).success(function(record){return _this.model.refresh(record,options)})):this.all(params).success(function(records){return _this.model.refresh(records,options)})},Collection.prototype.recordsResponse=function(data,status,xhr){return this.model.trigger("ajaxSuccess",null,status,xhr)},Collection.prototype.errorResponse=function(xhr,statusText,error){return this.model.trigger("ajaxError",null,xhr,statusText,error)},Collection}(Base),Singleton=function(_super){function Singleton(record){this.record=record,this.errorResponse=__bind(this.errorResponse,this),this.recordResponse=__bind(this.recordResponse,this),this.model=this.record.constructor}return __extends(Singleton,_super),Singleton.prototype.reload=function(params,options){var _this=this;return this.queue(function(){return _this.ajax(params,{type:"GET",url:Ajax.getURL(_this.record)}).success(_this.recordResponse(options)).error(_this.errorResponse(options))})},Singleton.prototype.create=function(params,options){var _this=this;return this.queue(function(){return _this.ajax(params,{type:"POST",data:JSON.stringify(_this.record),url:Ajax.getURL(_this.model)}).success(_this.recordResponse(options)).error(_this.errorResponse(options))})},Singleton.prototype.update=function(params,options){var _this=this;return this.queue(function(){return _this.ajax(params,{type:"PUT",data:JSON.stringify(_this.record),url:Ajax.getURL(_this.record)}).success(_this.recordResponse(options)).error(_this.errorResponse(options))})},Singleton.prototype.destroy=function(params,options){var _this=this;return this.queue(function(){return _this.ajax(params,{type:"DELETE",url:Ajax.getURL(_this.record)}).success(_this.recordResponse(options)).error(_this.errorResponse(options))})},Singleton.prototype.recordResponse=function(options){var _this=this;return options==null&&(options={}),function(data,status,xhr){var _ref;return Spine.isBlank(data)?data=!1:data=_this.model.fromJSON(data),Ajax.disable(function(){if(data)return data.id&&_this.record.id!==data.id&&_this.record.changeID(data.id),_this.record.updateAttributes(data.attributes())}),_this.record.trigger("ajaxSuccess",data,status,xhr),(_ref=options.success)!=null?_ref.apply(_this.record):void 0}},Singleton.prototype.errorResponse=function(options){var _this=this;return options==null&&(options={}),function(xhr,statusText,error){var _ref;return _this.record.trigger("ajaxError",xhr,statusText,error),(_ref=options.error)!=null?_ref.apply(_this.record):void 0}},Singleton}(Base),Model.host="",Include={ajax:function(){return new Singleton(this)},url:function(){var args,url;return args=1<=arguments.length?__slice.call(arguments,0):[],url=Ajax.getURL(this.constructor),url.charAt(url.length-1)!=="/"&&(url+="/"),url+=encodeURIComponent(this.id),args.unshift(url),args.join("/")}},Extend={ajax:function(){return new Collection(this)},url:function(){var args;return args=1<=arguments.length?__slice.call(arguments,0):[],args.unshift(this.className.toLowerCase()+"s"),args.unshift(Model.host),args.join("/")}},Model.Ajax={extended:function(){return this.fetch(this.ajaxFetch),this.change(this.ajaxChange),this.extend(Extend),this.include(Include)},ajaxFetch:function(){var _ref;return(_ref=this.ajax()).fetch.apply(_ref,arguments)},ajaxChange:function(record,type,options){options==null&&(options={});if(options.ajax===!1)return;return record.ajax()[type](options.ajax,options)}},Model.Ajax.Methods={extended:function(){return this.extend(Extend),this.include(Include)}},Ajax.defaults=Base.prototype.defaults,Spine.Ajax=Ajax,typeof module!="undefined"&&module!==null&&(module.exports=Ajax)}.call(this),define("lib/spine/ajax",function(){}),function(){var Spine;Spine=this.Spine||require("spine"),Spine.Model.Local={extended:function(){return this.change(this.saveLocal),this.fetch(this.loadLocal)},saveLocal:function(){var result;return result=JSON.stringify(this),localStorage[this.className]=result},loadLocal:function(){var result;return result=localStorage[this.className],this.refresh(result||[],{clear:!0})}},typeof module!="undefined"&&module!==null&&(module.exports=Spine.Model.Local)}.call(this),define("lib/spine/local",function(){}),define("models/adminsetting",["lib/spine/spine","lib/spine/ajax","lib/spine/local"],function(){if(window.AdminSetting)return window.AdminSetting;var AdminSetting=Spine.Model.sub();return AdminSetting.configure("AdminSetting","setting","added"),AdminSetting.extend(Spine.Model.Local),window.AdminSetting=AdminSetting,AdminSetting}),define("helpers/date",[],function(){return{getFormattedString:function(date){return date=date||new Date,[date.getMonth()+1,date.getDate(),date.getFullYear()].join("-")},getDate:function(){return new Date}}}),define("lib/text",["module"],function(module){var progIds=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],xmlRegExp=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,bodyRegExp=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,hasLocation=typeof location!="undefined"&&location.href,defaultProtocol=hasLocation&&location.protocol&&location.protocol.replace(/\:/,""),defaultHostName=hasLocation&&location.hostname,defaultPort=hasLocation&&(location.port||undefined),buildMap=[],masterConfig=module.config(),text,fs;return text={version:"2.0.0",strip:function(content){if(content){content=content.replace(xmlRegExp,"");var matches=content.match(bodyRegExp);matches&&(content=matches[1])}else content="";return content},jsEscape:function(content){return content.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r")},createXhr:function(){var xhr,i,progId;if(typeof XMLHttpRequest!="undefined")return new XMLHttpRequest;if(typeof ActiveXObject!="undefined")for(i=0;i<3;i++){progId=progIds[i];try{xhr=new ActiveXObject(progId)}catch(e){}if(xhr){progIds=[progId];break}}return xhr},parseName:function(name){var strip=!1,index=name.indexOf("."),modName=name.substring(0,index),ext=name.substring(index+1,name.length);return index=ext.indexOf("!"),index!==-1&&(strip=ext.substring(index+1,ext.length),strip=strip==="strip",ext=ext.substring(0,index)),{moduleName:modName,ext:ext,strip:strip}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(url,protocol,hostname,port){var match=text.xdRegExp.exec(url),uProtocol,uHostName,uPort;return match?(uProtocol=match[2],uHostName=match[3],uHostName=uHostName.split(":"),uPort=uHostName[1],uHostName=uHostName[0],(!uProtocol||uProtocol===protocol)&&(!uHostName||uHostName===hostname)&&(!uPort&&!uHostName||uPort===port)):!0},finishLoad:function(name,strip,content,onLoad){content=strip?text.strip(content):content,masterConfig.isBuild&&(buildMap[name]=content),onLoad(content)},load:function(name,req,onLoad,config){if(config.isBuild&&!config.inlineText){onLoad();return}masterConfig.isBuild=config.isBuild;var parsed=text.parseName(name),nonStripName=parsed.moduleName+"."+parsed.ext,url=req.toUrl(nonStripName),useXhr=masterConfig.useXhr||text.useXhr;!hasLocation||useXhr(url,defaultProtocol,defaultHostName,defaultPort)?text.get(url,function(content){text.finishLoad(name,parsed.strip,content,onLoad)},function(err){onLoad.error&&onLoad.error(err)}):req([nonStripName],function(content){text.finishLoad(parsed.moduleName+"."+parsed.ext,parsed.strip,content,onLoad)})},write:function(pluginName,moduleName,write,config){if(buildMap.hasOwnProperty(moduleName)){var content=text.jsEscape(buildMap[moduleName]);write.asModule(pluginName+"!"+moduleName,"define(function () { return '"+content+"';});\n")}},writeFile:function(pluginName,moduleName,req,write,config){var parsed=text.parseName(moduleName),nonStripName=parsed.moduleName+"."+parsed.ext,fileName=req.toUrl(parsed.moduleName+"."+parsed.ext)+".js";text.load(nonStripName,req,function(value){var textWrite=function(contents){return write(fileName,contents)};textWrite.asModule=function(moduleName,contents){return write.asModule(moduleName,fileName,contents)},text.write(pluginName,nonStripName,textWrite,config)},config)}},typeof process!="undefined"&&process.versions&&!!process.versions.node?(fs=require.nodeRequire("fs"),text.get=function(url,callback){var file=fs.readFileSync(url,"utf8");file.indexOf("﻿")===0&&(file=file.substring(1)),callback(file)}):text.createXhr()?text.get=function(url,callback,errback){var xhr=text.createXhr();xhr.open("GET",url,!0),masterConfig.onXhr&&masterConfig.onXhr(xhr,url),xhr.onreadystatechange=function(evt){var status,err;xhr.readyState===4&&(status=xhr.status,status>399&&status<600?(err=new Error(url+" HTTP status: "+status),err.xhr=xhr,errback(err)):callback(xhr.responseText))},xhr.send(null)}:typeof Packages!="undefined"&&(text.get=function(url,callback){var encoding="utf-8",file=new java.io.File(url),lineSeparator=java.lang.System.getProperty("line.separator"),input=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(file),encoding)),stringBuffer,line,content="";try{stringBuffer=new java.lang.StringBuffer,line=input.readLine(),line&&line.length()&&line.charAt(0)===65279&&(line=line.substring(1)),stringBuffer.append(line);while((line=input.readLine())!==null)stringBuffer.append(lineSeparator),stringBuffer.append(line);content=String(stringBuffer.toString())}finally{input.close()}callback(content)}),text}),define("lib/text!views/message.tpl",[],function(){return'<div class="alert fade in{{#if type}} {{type}}{{/if}}">\n	<a class="close" data-dismiss="alert" href="#">&times;</a>\n	<span id="message">{{message}}</span>\n</div>'});var Handlebars={};Handlebars.VERSION="1.0.beta.6",Handlebars.helpers={},Handlebars.partials={},Handlebars.registerHelper=function(name,fn,inverse){inverse&&(fn.not=inverse),this.helpers[name]=fn},Handlebars.registerPartial=function(name,str){this.partials[name]=str},Handlebars.registerHelper("helperMissing",function(arg){if(arguments.length===2)return undefined;throw new Error("Could not find property '"+arg+"'")});var toString=Object.prototype.toString,functionType="[object Function]";Handlebars.registerHelper("blockHelperMissing",function(context,options){var inverse=options.inverse||function(){},fn=options.fn,ret="",type=toString.call(context);type===functionType&&(context=context.call(this));if(context===!0)return fn(this);if(context===!1||context==null)return inverse(this);if(type==="[object Array]"){if(context.length>0)for(var i=0,j=context.length;i<j;i++)ret+=fn(context[i]);else ret=inverse(this);return ret}return fn(context)}),Handlebars.registerHelper("each",function(context,options){var fn=options.fn,inverse=options.inverse,ret="";if(context&&context.length>0)for(var i=0,j=context.length;i<j;i++)ret+=fn(context[i]);else ret=inverse(this);return ret}),Handlebars.registerHelper("if",function(context,options){var type=toString.call(context);return type===functionType&&(context=context.call(this)),!context||Handlebars.Utils.isEmpty(context)?options.inverse(this):options.fn(this)}),Handlebars.registerHelper("unless",function(context,options){var fn=options.fn,inverse=options.inverse;return options.fn=inverse,options.inverse=fn,Handlebars.helpers["if"].call(this,context,options)}),Handlebars.registerHelper("with",function(context,options){return options.fn(context)}),Handlebars.registerHelper("log",function(context){Handlebars.log(context)});var handlebars=function(){var parser={trace:function(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,statements:6,simpleInverse:7,statement:8,openInverse:9,closeBlock:10,openBlock:11,mustache:12,partial:13,CONTENT:14,COMMENT:15,OPEN_BLOCK:16,inMustache:17,CLOSE:18,OPEN_INVERSE:19,OPEN_ENDBLOCK:20,path:21,OPEN:22,OPEN_UNESCAPED:23,OPEN_PARTIAL:24,params:25,hash:26,param:27,STRING:28,INTEGER:29,BOOLEAN:30,hashSegments:31,hashSegment:32,ID:33,EQUALS:34,pathSegments:35,SEP:36,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"CONTENT",15:"COMMENT",16:"OPEN_BLOCK",18:"CLOSE",19:"OPEN_INVERSE",20:"OPEN_ENDBLOCK",22:"OPEN",23:"OPEN_UNESCAPED",24:"OPEN_PARTIAL",28:"STRING",29:"INTEGER",30:"BOOLEAN",33:"ID",34:"EQUALS",36:"SEP"},productions_:[0,[3,2],[4,3],[4,1],[4,0],[6,1],[6,2],[8,3],[8,3],[8,1],[8,1],[8,1],[8,1],[11,3],[9,3],[10,3],[12,3],[12,3],[13,3],[13,4],[7,2],[17,3],[17,2],[17,2],[17,1],[25,2],[25,1],[27,1],[27,1],[27,1],[27,1],[26,1],[31,2],[31,1],[32,3],[32,3],[32,3],[32,3],[21,1],[35,3],[35,1]],performAction:function(yytext,yyleng,yylineno,yy,yystate,$$,_$){var $0=$$.length-1;switch(yystate){case 1:return $$[$0-1];case 2:this.$=new yy.ProgramNode($$[$0-2],$$[$0]);break;case 3:this.$=new yy.ProgramNode($$[$0]);break;case 4:this.$=new yy.ProgramNode([]);break;case 5:this.$=[$$[$0]];break;case 6:$$[$0-1].push($$[$0]),this.$=$$[$0-1];break;case 7:this.$=new yy.InverseNode($$[$0-2],$$[$0-1],$$[$0]);break;case 8:this.$=new yy.BlockNode($$[$0-2],$$[$0-1],$$[$0]);break;case 9:this.$=$$[$0];break;case 10:this.$=$$[$0];break;case 11:this.$=new yy.ContentNode($$[$0]);break;case 12:this.$=new yy.CommentNode($$[$0]);break;case 13:this.$=new yy.MustacheNode($$[$0-1][0],$$[$0-1][1]);break;case 14:this.$=new yy.MustacheNode($$[$0-1][0],$$[$0-1][1]);break;case 15:this.$=$$[$0-1];break;case 16:this.$=new yy.MustacheNode($$[$0-1][0],$$[$0-1][1]);break;case 17:this.$=new yy.MustacheNode($$[$0-1][0],$$[$0-1][1],!0);break;case 18:this.$=new yy.PartialNode($$[$0-1]);break;case 19:this.$=new yy.PartialNode($$[$0-2],$$[$0-1]);break;case 20:break;case 21:this.$=[[$$[$0-2]].concat($$[$0-1]),$$[$0]];break;case 22:this.$=[[$$[$0-1]].concat($$[$0]),null];break;case 23:this.$=[[$$[$0-1]],$$[$0]];break;case 24:this.$=[[$$[$0]],null];break;case 25:$$[$0-1].push($$[$0]),this.$=$$[$0-1];break;case 26:this.$=[$$[$0]];break;case 27:this.$=$$[$0];break;case 28:this.$=new yy.StringNode($$[$0]);break;case 29:this.$=new yy.IntegerNode($$[$0]);break;case 30:this.$=new yy.BooleanNode($$[$0]);break;case 31:this.$=new yy.HashNode($$[$0]);break;case 32:$$[$0-1].push($$[$0]),this.$=$$[$0-1];break;case 33:this.$=[$$[$0]];break;case 34:this.$=[$$[$0-2],$$[$0]];break;case 35:this.$=[$$[$0-2],new yy.StringNode($$[$0])];break;case 36:this.$=[$$[$0-2],new yy.IntegerNode($$[$0])];break;case 37:this.$=[$$[$0-2],new yy.BooleanNode($$[$0])];break;case 38:this.$=new yy.IdNode($$[$0]);break;case 39:$$[$0-2].push($$[$0]),this.$=$$[$0-2];break;case 40:this.$=[$$[$0]]}},table:[{3:1,4:2,5:[2,4],6:3,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],24:[1,15]},{1:[3]},{5:[1,16]},{5:[2,3],7:17,8:18,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,19],20:[2,3],22:[1,13],23:[1,14],24:[1,15]},{5:[2,5],14:[2,5],15:[2,5],16:[2,5],19:[2,5],20:[2,5],22:[2,5],23:[2,5],24:[2,5]},{4:20,6:3,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,4],22:[1,13],23:[1,14],24:[1,15]},{4:21,6:3,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,4],22:[1,13],23:[1,14],24:[1,15]},{5:[2,9],14:[2,9],15:[2,9],16:[2,9],19:[2,9],20:[2,9],22:[2,9],23:[2,9],24:[2,9]},{5:[2,10],14:[2,10],15:[2,10],16:[2,10],19:[2,10],20:[2,10],22:[2,10],23:[2,10],24:[2,10]},{5:[2,11],14:[2,11],15:[2,11],16:[2,11],19:[2,11],20:[2,11],22:[2,11],23:[2,11],24:[2,11]},{5:[2,12],14:[2,12],15:[2,12],16:[2,12],19:[2,12],20:[2,12],22:[2,12],23:[2,12],24:[2,12]},{17:22,21:23,33:[1,25],35:24},{17:26,21:23,33:[1,25],35:24},{17:27,21:23,33:[1,25],35:24},{17:28,21:23,33:[1,25],35:24},{21:29,33:[1,25],35:24},{1:[2,1]},{6:30,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],24:[1,15]},{5:[2,6],14:[2,6],15:[2,6],16:[2,6],19:[2,6],20:[2,6],22:[2,6],23:[2,6],24:[2,6]},{17:22,18:[1,31],21:23,33:[1,25],35:24},{10:32,20:[1,33]},{10:34,20:[1,33]},{18:[1,35]},{18:[2,24],21:40,25:36,26:37,27:38,28:[1,41],29:[1,42],30:[1,43],31:39,32:44,33:[1,45],35:24},{18:[2,38],28:[2,38],29:[2,38],30:[2,38],33:[2,38],36:[1,46]},{18:[2,40],28:[2,40],29:[2,40],30:[2,40],33:[2,40],36:[2,40]},{18:[1,47]},{18:[1,48]},{18:[1,49]},{18:[1,50],21:51,33:[1,25],35:24},{5:[2,2],8:18,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,2],22:[1,13],23:[1,14],24:[1,15]},{14:[2,20],15:[2,20],16:[2,20],19:[2,20],22:[2,20],23:[2,20],24:[2,20]},{5:[2,7],14:[2,7],15:[2,7],16:[2,7],19:[2,7],20:[2,7],22:[2,7],23:[2,7],24:[2,7]},{21:52,33:[1,25],35:24},{5:[2,8],14:[2,8],15:[2,8],16:[2,8],19:[2,8],20:[2,8],22:[2,8],23:[2,8],24:[2,8]},{14:[2,14],15:[2,14],16:[2,14],19:[2,14],20:[2,14],22:[2,14],23:[2,14],24:[2,14]},{18:[2,22],21:40,26:53,27:54,28:[1,41],29:[1,42],30:[1,43],31:39,32:44,33:[1,45],35:24},{18:[2,23]},{18:[2,26],28:[2,26],29:[2,26],30:[2,26],33:[2,26]},{18:[2,31],32:55,33:[1,56]},{18:[2,27],28:[2,27],29:[2,27],30:[2,27],33:[2,27]},{18:[2,28],28:[2,28],29:[2,28],30:[2,28],33:[2,28]},{18:[2,29],28:[2,29],29:[2,29],30:[2,29],33:[2,29]},{18:[2,30],28:[2,30],29:[2,30],30:[2,30],33:[2,30]},{18:[2,33],33:[2,33]},{18:[2,40],28:[2,40],29:[2,40],30:[2,40],33:[2,40],34:[1,57],36:[2,40]},{33:[1,58]},{14:[2,13],15:[2,13],16:[2,13],19:[2,13],20:[2,13],22:[2,13],23:[2,13],24:[2,13]},{5:[2,16],14:[2,16],15:[2,16],16:[2,16],19:[2,16],20:[2,16],22:[2,16],23:[2,16],24:[2,16]},{5:[2,17],14:[2,17],15:[2,17],16:[2,17],19:[2,17],20:[2,17],22:[2,17],23:[2,17],24:[2,17]},{5:[2,18],14:[2,18],15:[2,18],16:[2,18],19:[2,18],20:[2,18],22:[2,18],23:[2,18],24:[2,18]},{18:[1,59]},{18:[1,60]},{18:[2,21]},{18:[2,25],28:[2,25],29:[2,25],30:[2,25],33:[2,25]},{18:[2,32],33:[2,32]},{34:[1,57]},{21:61,28:[1,62],29:[1,63],30:[1,64],33:[1,25],35:24},{18:[2,39],28:[2,39],29:[2,39],30:[2,39],33:[2,39],36:[2,39]},{5:[2,19],14:[2,19],15:[2,19],16:[2,19],19:[2,19],20:[2,19],22:[2,19],23:[2,19],24:[2,19]},{5:[2,15],14:[2,15],15:[2,15],16:[2,15],19:[2,15],20:[2,15],22:[2,15],23:[2,15],24:[2,15]},{18:[2,34],33:[2,34]},{18:[2,35],33:[2,35]},{18:[2,36],33:[2,36]},{18:[2,37],33:[2,37]}],defaultActions:{16:[2,1],37:[2,23],53:[2,21]},parseError:function(str,hash){throw new Error(str)},parse:function(input){function popStack(n){stack.length=stack.length-2*n,vstack.length=vstack.length-n,lstack.length=lstack.length-n}function lex(){var token;return token=self.lexer.lex()||1,typeof token!="number"&&(token=self.symbols_[token]||token),token}var self=this,stack=[0],vstack=[null],lstack=[],table=this.table,yytext="",yylineno=0,yyleng=0,recovering=0,TERROR=2,EOF=1;this.lexer.setInput(input),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,typeof this.lexer.yylloc=="undefined"&&(this.lexer.yylloc={});var yyloc=this.lexer.yylloc;lstack.push(yyloc),typeof this.yy.parseError=="function"&&(this.parseError=this.yy.parseError);var symbol,preErrorSymbol,state,action,a,r,yyval={},p,len,newState,expected;for(;;){state=stack[stack.length-1],this.defaultActions[state]?action=this.defaultActions[state]:(symbol==null&&(symbol=lex()),action=table[state]&&table[state][symbol]);if(typeof action=="undefined"||!action.length||!action[0])if(!recovering){expected=[];for(p in table[state])this.terminals_[p]&&p>2&&expected.push("'"+this.terminals_[p]+"'");var errStr="";this.lexer.showPosition?errStr="Parse error on line "+(yylineno+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+expected.join(", ")+", got '"+this.terminals_[symbol]+"'":errStr="Parse error on line "+(yylineno+1)+": Unexpected "+(symbol==1?"end of input":"'"+(this.terminals_[symbol]||symbol)+"'"),this.parseError(errStr,{text:this.lexer.match,token:this.terminals_[symbol]||symbol,line:this.lexer.yylineno,loc:yyloc,expected:expected})}if(action[0]instanceof Array&&action.length>1)throw new Error("Parse Error: multiple actions possible at state: "+state+", token: "+symbol);switch(action[0]){case 1:stack.push(symbol),vstack.push(this.lexer.yytext),lstack.push(this.lexer.yylloc),stack.push(action[1]),symbol=null,preErrorSymbol?(symbol=preErrorSymbol,preErrorSymbol=null):(yyleng=this.lexer.yyleng,yytext=this.lexer.yytext,yylineno=this.lexer.yylineno,yyloc=this.lexer.yylloc,recovering>0&&recovering--);break;case 2:len=this.productions_[action[1]][1],yyval.$=vstack[vstack.length-len],yyval._$={first_line:lstack[lstack.length-(len||1)].first_line,last_line:lstack[lstack.length-1].last_line,first_column:lstack[lstack.length-(len||1)].first_column,last_column:lstack[lstack.length-1].last_column},r=this.performAction.call(yyval,yytext,yyleng,yylineno,this.yy,action[1],vstack,lstack);if(typeof r!="undefined")return r;len&&(stack=stack.slice(0,-1*len*2),vstack=vstack.slice(0,-1*len),lstack=lstack.slice(0,-1*len)),stack.push(this.productions_[action[1]][0]),vstack.push(yyval.$),lstack.push(yyval._$),newState=table[stack[stack.length-2]][stack[stack.length-1]],stack.push(newState);break;case 3:return!0}}return!0}},lexer=function(){var lexer={EOF:1,parseError:function(str,hash){if(!this.yy.parseError)throw new Error(str);this.yy.parseError(str,hash)},setInput:function(input){return this._input=input,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this},input:function(){var ch=this._input[0];this.yytext+=ch,this.yyleng++,this.match+=ch,this.matched+=ch;var lines=ch.match(/\n/);return lines&&this.yylineno++,this._input=this._input.slice(1),ch},unput:function(ch){return this._input=ch+this._input,this},more:function(){return this._more=!0,this},pastInput:function(){var past=this.matched.substr(0,this.matched.length-this.match.length);return(past.length>20?"...":"")+past.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var next=this.match;return next.length<20&&(next+=this._input.substr(0,20-next.length)),(next.substr(0,20)+(next.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var pre=this.pastInput(),c=(new Array(pre.length+1)).join("-");return pre+this.upcomingInput()+"\n"+c+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var token,match,col,lines;this._more||(this.yytext="",this.match="");var rules=this._currentRules();for(var i=0;i<rules.length;i++){match=this._input.match(this.rules[rules[i]]);if(match){lines=match[0].match(/\n.*/g),lines&&(this.yylineno+=lines.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:lines?lines[lines.length-1].length-1:this.yylloc.last_column+match[0].length},this.yytext+=match[0],this.match+=match[0],this.matches=match,this.yyleng=this.yytext.length,this._more=!1,this._input=this._input.slice(match[0].length),this.matched+=match[0],token=this.performAction.call(this,this.yy,this,rules[i],this.conditionStack[this.conditionStack.length-1]);if(token)return token;return}}if(this._input==="")return this.EOF;this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var r=this.next();return typeof r!="undefined"?r:this.lex()},begin:function(condition){this.conditionStack.push(condition)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(condition){this.begin(condition)}};return lexer.performAction=function(yy,yy_,$avoiding_name_collisions,YY_START){var YYSTATE=YY_START;switch($avoiding_name_collisions){case 0:yy_.yytext.slice(-1)!=="\\"&&this.begin("mu"),yy_.yytext.slice(-1)==="\\"&&(yy_.yytext=yy_.yytext.substr(0,yy_.yyleng-1),this.begin("emu"));if(yy_.yytext)return 14;break;case 1:return 14;case 2:return this.popState(),14;case 3:return 24;case 4:return 16;case 5:return 20;case 6:return 19;case 7:return 19;case 8:return 23;case 9:return 23;case 10:return yy_.yytext=yy_.yytext.substr(3,yy_.yyleng-5),this.popState(),15;case 11:return 22;case 12:return 34;case 13:return 33;case 14:return 33;case 15:return 36;case 16:break;case 17:return this.popState(),18;case 18:return this.popState(),18;case 19:return yy_.yytext=yy_.yytext.substr(1,yy_.yyleng-2).replace(/\\"/g,'"'),28;case 20:return 30;case 21:return 30;case 22:return 29;case 23:return 33;case 24:return yy_.yytext=yy_.yytext.substr(1,yy_.yyleng-2),33;case 25:return"INVALID";case 26:return 5}},lexer.rules=[/^[^\x00]*?(?=(\{\{))/,/^[^\x00]+/,/^[^\x00]{2,}?(?=(\{\{))/,/^\{\{>/,/^\{\{#/,/^\{\{\//,/^\{\{\^/,/^\{\{\s*else\b/,/^\{\{\{/,/^\{\{&/,/^\{\{![\s\S]*?\}\}/,/^\{\{/,/^=/,/^\.(?=[} ])/,/^\.\./,/^[\/.]/,/^\s+/,/^\}\}\}/,/^\}\}/,/^"(\\["]|[^"])*"/,/^true(?=[}\s])/,/^false(?=[}\s])/,/^[0-9]+(?=[}\s])/,/^[a-zA-Z0-9_$-]+(?=[=}\s\/.])/,/^\[[^\]]*\]/,/^./,/^$/],lexer.conditions={mu:{rules:[3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26],inclusive:!1},emu:{rules:[2],inclusive:!1},INITIAL:{rules:[0,1,26],inclusive:!0}},lexer}();return parser.lexer=lexer,parser}();typeof require!="undefined"&&typeof exports!="undefined"&&(exports.parser=handlebars,exports.parse=function(){return handlebars.parse.apply(handlebars,arguments)},exports.main=function(args){if(!args[1])throw new Error("Usage: "+args[0]+" FILE");if(typeof process!="undefined")var source=require("fs").readFileSync(require("path").join(process.cwd(),args[1]),"utf8");else var cwd=require("file").path(require("file").cwd()),source=cwd.join(args[1]).read({charset:"utf-8"});return exports.parser.parse(source)},typeof module!="undefined"&&require.main===module&&exports.main(typeof process!="undefined"?process.argv.slice(1):require("system").args)),Handlebars.Parser=handlebars,Handlebars.parse=function(string){return Handlebars.Parser.yy=Handlebars.AST,Handlebars.Parser.parse(string)},Handlebars.print=function(ast){return(new Handlebars.PrintVisitor).accept(ast)},Handlebars.logger={DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,log:function(level,str){}},Handlebars.log=function(level,str){Handlebars.logger.log(level,str)},function(){Handlebars.AST={},Handlebars.AST.ProgramNode=function(statements,inverse){this.type="program",this.statements=statements,inverse&&(this.inverse=new Handlebars.AST.ProgramNode(inverse))},Handlebars.AST.MustacheNode=function(params,hash,unescaped){this.type="mustache",this.id=params[0],this.params=params.slice(1),this.hash=hash,this.escaped=!unescaped},Handlebars.AST.PartialNode=function(id,context){this.type="partial",this.id=id,this.context=context};var verifyMatch=function(open,close){if(open.original!==close.original)throw new Handlebars.Exception(open.original+" doesn't match "+close.original)};Handlebars.AST.BlockNode=function(mustache,program,close){verifyMatch(mustache.id,close),this.type="block",this.mustache=mustache,this.program=program},Handlebars.AST.InverseNode=function(mustache,program,close){verifyMatch(mustache.id,close),this.type="inverse",this.mustache=mustache,this.program=program},Handlebars.AST.ContentNode=function(string){this.type="content",this.string=string},Handlebars.AST.HashNode=function(pairs){this.type="hash",this.pairs=pairs},Handlebars.AST.IdNode=function(parts){this.type="ID",this.original=parts.join(".");var dig=[],depth=0;for(var i=0,l=parts.length;i<l;i++){var part=parts[i];part===".."?depth++:part==="."||part==="this"?this.isScoped=!0:dig.push(part)}this.parts=dig,this.string=dig.join("."),this.depth=depth,this.isSimple=dig.length===1&&depth===0},Handlebars.AST.StringNode=function(string){this.type="STRING",this.string=string},Handlebars.AST.IntegerNode=function(integer){this.type="INTEGER",this.integer=integer},Handlebars.AST.BooleanNode=function(bool){this.type="BOOLEAN",this.bool=bool},Handlebars.AST.CommentNode=function(comment){this.type="comment",this.comment=comment}}(),Handlebars.Exception=function(message){var tmp=Error.prototype.constructor.apply(this,arguments);for(var p in tmp)tmp.hasOwnProperty(p)&&(this[p]=tmp[p]);this.message=tmp.message},Handlebars.Exception.prototype=new Error,Handlebars.SafeString=function(string){this.string=string},Handlebars.SafeString.prototype.toString=function(){return this.string.toString()},function(){var escape={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},badChars=/&(?!\w+;)|[<>"'`]/g,possible=/[&<>"'`]/,escapeChar=function(chr){return escape[chr]||"&amp;"};Handlebars.Utils={escapeExpression:function(string){return string instanceof Handlebars.SafeString?string.toString():string==null||string===!1?"":possible.test(string)?string.replace(badChars,escapeChar):string},isEmpty:function(value){return typeof value=="undefined"?!0:value===null?!0:value===!1?!0:Object.prototype.toString.call(value)==="[object Array]"&&value.length===0?!0:!1}}}(),Handlebars.Compiler=function(){},Handlebars.JavaScriptCompiler=function(){},function(Compiler,JavaScriptCompiler){Compiler.OPCODE_MAP={appendContent:1,getContext:2,lookupWithHelpers:3,lookup:4,append:5,invokeMustache:6,appendEscaped:7,pushString:8,truthyOrFallback:9,functionOrFallback:10,invokeProgram:11,invokePartial:12,push:13,assignToHash:15,pushStringParam:16},Compiler.MULTI_PARAM_OPCODES={appendContent:1,getContext:1,lookupWithHelpers:2,lookup:1,invokeMustache:3,pushString:1,truthyOrFallback:1,functionOrFallback:1,invokeProgram:3,invokePartial:1,push:1,assignToHash:1,pushStringParam:1},Compiler.DISASSEMBLE_MAP={};for(var prop in Compiler.OPCODE_MAP){var value=Compiler.OPCODE_MAP[prop];Compiler.DISASSEMBLE_MAP[value]=prop}Compiler.multiParamSize=function(code){return Compiler.MULTI_PARAM_OPCODES[Compiler.DISASSEMBLE_MAP[code]]},Compiler.prototype={compiler:Compiler,disassemble:function(){var opcodes=this.opcodes,opcode,nextCode,out=[],str,name,value;for(var i=0,l=opcodes.length;i<l;i++){opcode=opcodes[i];if(opcode==="DECLARE")name=opcodes[++i],value=opcodes[++i],out.push("DECLARE "+name+" = "+value);else{str=Compiler.DISASSEMBLE_MAP[opcode];var extraParams=Compiler.multiParamSize(opcode),codes=[];for(var j=0;j<extraParams;j++)nextCode=opcodes[++i],typeof nextCode=="string"&&(nextCode='"'+nextCode.replace("\n","\\n")+'"'),codes.push(nextCode);str=str+" "+codes.join(" "),out.push(str)}}return out.join("\n")},guid:0,compile:function(program,options){this.children=[],this.depths={list:[]},this.options=options;var knownHelpers=this.options.knownHelpers;this.options.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,"if":!0,unless:!0,"with":!0,log:!0};if(knownHelpers)for(var name in knownHelpers)this.options.knownHelpers[name]=knownHelpers[name];return this.program(program)},accept:function(node){return this[node.type](node)},program:function(program){var statements=program.statements,statement;this.opcodes=[];for(var i=0,l=statements.length;i<l;i++)statement=statements[i],this[statement.type](statement);return this.isSimple=l===1,this.depths.list=this.depths.list.sort(function(a,b){return a-b}),this},compileProgram:function(program){var result=(new this.compiler).compile(program,this.options),guid=this.guid++;this.usePartial=this.usePartial||result.usePartial,this.children[guid]=result;for(var i=0,l=result.depths.list.length;i<l;i++){depth=result.depths.list[i];if(depth<2)continue;this.addDepth(depth-1)}return guid},block:function(block){var mustache=block.mustache,depth,child,inverse,inverseGuid,params=this.setupStackForMustache(mustache),programGuid=this.compileProgram(block.program);block.program.inverse&&(inverseGuid=this.compileProgram(block.program.inverse),this.declare("inverse",inverseGuid)),this.opcode("invokeProgram",programGuid,params.length,!!mustache.hash),this.declare("inverse",null),this.opcode("append")},inverse:function(block){var params=this.setupStackForMustache(block.mustache),programGuid=this.compileProgram(block.program);this.declare("inverse",programGuid),this.opcode("invokeProgram",null,params.length,!!block.mustache.hash),this.declare("inverse",null),this.opcode("append")},hash:function(hash){var pairs=hash.pairs,pair,val;this.opcode("push","{}");for(var i=0,l=pairs.length;i<l;i++)pair=pairs[i],val=pair[1],this.accept(val),this.opcode("assignToHash",pair[0])},partial:function(partial){var id=partial.id;this.usePartial=!0,partial.context?this.ID(partial.context):this.opcode("push","depth0"),this.opcode("invokePartial",id.original),this.opcode("append")},content:function(content){this.opcode("appendContent",content.string)},mustache:function(mustache){var params=this.setupStackForMustache(mustache);this.opcode("invokeMustache",params.length,mustache.id.original,!!mustache.hash),mustache.escaped&&!this.options.noEscape?this.opcode("appendEscaped"):this.opcode("append")},ID:function(id){this.addDepth(id.depth),this.opcode("getContext",id.depth),this.opcode("lookupWithHelpers",id.parts[0]||null,id.isScoped||!1);for(var i=1,l=id.parts.length;i<l;i++)this.opcode("lookup",id.parts[i])},STRING:function(string){this.opcode("pushString",string.string)},INTEGER:function(integer){this.opcode("push",integer.integer)},BOOLEAN:function(bool){this.opcode("push",bool.bool)},comment:function(){},pushParams:function(params){var i=params.length,param;while(i--)param=params[i],this.options.stringParams?(param.depth&&this.addDepth(param.depth),this.opcode("getContext",param.depth||0),this.opcode("pushStringParam",param.string)):this[param.type](param)},opcode:function(name,val1,val2,val3){this.opcodes.push(Compiler.OPCODE_MAP[name]),val1!==undefined&&this.opcodes.push(val1),val2!==undefined&&this.opcodes.push(val2),val3!==undefined&&this.opcodes.push(val3)},declare:function(name,value){this.opcodes.push("DECLARE"),this.opcodes.push(name),this.opcodes.push(value)},addDepth:function(depth){if(depth===0)return;this.depths[depth]||(this.depths[depth]=!0,this.depths.list.push(depth))},setupStackForMustache:function(mustache){var params=mustache.params;return this.pushParams(params),mustache.hash&&this.hash(mustache.hash),this.ID(mustache.id),params}},JavaScriptCompiler.prototype={nameLookup:function(parent,name,type){return/^[0-9]+$/.test(name)?parent+"["+name+"]":JavaScriptCompiler.isValidJavaScriptVariableName(name)?parent+"."+name:parent+"['"+name+"']"},appendToBuffer:function(string){return this.environment.isSimple?"return "+string+";":"buffer += "+string+";"},initializeBuffer:function(){return this.quotedString("")},namespace:"Handlebars",compile:function(environment,options,context,asObject){this.environment=environment,this.options=options||{},this.name=this.environment.name,this.isChild=!!context,this.context=context||{programs:[],aliases:{self:"this"},registers:{list:[]}},this.preamble(),this.stackSlot=0,this.stackVars=[],this.compileChildren(environment,options);var opcodes=environment.opcodes,opcode;this.i=0;for(l=opcodes.length;this.i<l;this.i++)opcode=this.nextOpcode(0),opcode[0]==="DECLARE"?(this.i=this.i+2,this[opcode[1]]=opcode[2]):(this.i=this.i+opcode[1].length,this[opcode[0]].apply(this,opcode[1]));return this.createFunctionContext(asObject)},nextOpcode:function(n){var opcodes=this.environment.opcodes,opcode=opcodes[this.i+n],name,val,extraParams,codes;if(opcode==="DECLARE")return name=opcodes[this.i+1],val=opcodes[this.i+2],["DECLARE",name,val];name=Compiler.DISASSEMBLE_MAP[opcode],extraParams=Compiler.multiParamSize(opcode),codes=[];for(var j=0;j<extraParams;j++)codes.push(opcodes[this.i+j+1+n]);return[name,codes]},eat:function(opcode){this.i=this.i+opcode.length},preamble:function(){var out=[];this.useRegister("foundHelper");if(!this.isChild){var namespace=this.namespace,copies="helpers = helpers || "+namespace+".helpers;";this.environment.usePartial&&(copies=copies+" partials = partials || "+namespace+".partials;"),out.push(copies)}else out.push("");this.environment.isSimple?out.push(""):out.push(", buffer = "+this.initializeBuffer()),this.lastContext=0,this.source=out},createFunctionContext:function(asObject){var locals=this.stackVars;this.isChild||(locals=locals.concat(this.context.registers.list)),locals.length>0&&(this.source[1]=this.source[1]+", "+locals.join(", "));if(!this.isChild){var aliases=[];for(var alias in this.context.aliases)this.source[1]=this.source[1]+", "+alias+"="+this.context.aliases[alias]}this.source[1]&&(this.source[1]="var "+this.source[1].substring(2)+";"),this.isChild||(this.source[1]+="\n"+this.context.programs.join("\n")+"\n"),this.environment.isSimple||this.source.push("return buffer;");var params=this.isChild?["depth0","data"]:["Handlebars","depth0","helpers","partials","data"];for(var i=0,l=this.environment.depths.list.length;i<l;i++)params.push("depth"+this.environment.depths.list[i]);if(asObject)return params.push(this.source.join("\n  ")),Function.apply(this,params);var functionSource="function "+(this.name||"")+"("+params.join(",")+") {\n  "+this.source.join("\n  ")+"}";return Handlebars.log(Handlebars.logger.DEBUG,functionSource+"\n\n"),functionSource},appendContent:function(content){this.source.push(this.appendToBuffer(this.quotedString(content)))},append:function(){var local=this.popStack();this.source.push("if("+local+" || "+local+" === 0) { "+this.appendToBuffer(local)+" }"),this.environment.isSimple&&this.source.push("else { "+this.appendToBuffer("''")+" }")},appendEscaped:function(){var opcode=this.nextOpcode(1),extra="";this.context.aliases.escapeExpression="this.escapeExpression",opcode[0]==="appendContent"&&(extra=" + "+this.quotedString(opcode[1][0]),this.eat(opcode)),this.source.push(this.appendToBuffer("escapeExpression("+this.popStack()+")"+extra))},getContext:function(depth){this.lastContext!==depth&&(this.lastContext=depth)},lookupWithHelpers:function(name,isScoped){if(name){var topStack=this.nextStack();this.usingKnownHelper=!1;var toPush;!isScoped&&this.options.knownHelpers[name]?(toPush=topStack+" = "+this.nameLookup("helpers",name,"helper"),this.usingKnownHelper=!0):isScoped||this.options.knownHelpersOnly?toPush=topStack+" = "+this.nameLookup("depth"+this.lastContext,name,"context"):(this.register("foundHelper",this.nameLookup("helpers",name,"helper")),toPush=topStack+" = foundHelper || "+this.nameLookup("depth"+this.lastContext,name,"context")),toPush+=";",this.source.push(toPush)}else this.pushStack("depth"+this.lastContext)},lookup:function(name){var topStack=this.topStack();this.source.push(topStack+" = ("+topStack+" === null || "+topStack+" === undefined || "+topStack+" === false ? "+topStack+" : "+this.nameLookup(topStack,name,"context")+");")},pushStringParam:function(string){this.pushStack("depth"+this.lastContext),this.pushString(string)},pushString:function(string){this.pushStack(this.quotedString(string))},push:function(name){this.pushStack(name)},invokeMustache:function(paramSize,original,hasHash){this.populateParams(paramSize,this.quotedString(original),"{}",null,hasHash,function(nextStack,helperMissingString,id){this.usingKnownHelper||(this.context.aliases.helperMissing="helpers.helperMissing",this.context.aliases.undef="void 0",this.source.push("else if("+id+"=== undef) { "+nextStack+" = helperMissing.call("+helperMissingString+"); }"),nextStack!==id&&this.source.push("else { "+nextStack+" = "+id+"; }"))})},invokeProgram:function(guid,paramSize,hasHash){var inverse=this.programExpression(this.inverse),mainProgram=this.programExpression(guid);this.populateParams(paramSize,null,mainProgram,inverse,hasHash,function(nextStack,helperMissingString,id){this.usingKnownHelper||(this.context.aliases.blockHelperMissing="helpers.blockHelperMissing",this.source.push("else { "+nextStack+" = blockHelperMissing.call("+helperMissingString+"); }"))})},populateParams:function(paramSize,helperId,program,inverse,hasHash,fn){var needsRegister=hasHash||this.options.stringParams||inverse||this.options.data,id=this.popStack(),nextStack,params=[],param,stringParam,stringOptions;needsRegister?(this.register("tmp1",program),stringOptions="tmp1"):stringOptions="{ hash: {} }";if(needsRegister){var hash=hasHash?this.popStack():"{}";this.source.push("tmp1.hash = "+hash+";")}this.options.stringParams&&this.source.push("tmp1.contexts = [];");for(var i=0;i<paramSize;i++)param=this.popStack(),params.push(param),this.options.stringParams&&this.source.push("tmp1.contexts.push("+this.popStack()+");");inverse&&(this.source.push("tmp1.fn = tmp1;"),this.source.push("tmp1.inverse = "+inverse+";")),this.options.data&&this.source.push("tmp1.data = data;"),params.push(stringOptions),this.populateCall(params,id,helperId||id,fn,program!=="{}")},populateCall:function(params,id,helperId,fn,program){var paramString=["depth0"].concat(params).join(", "),helperMissingString=["depth0"].concat(helperId).concat(params).join(", "),nextStack=this.nextStack();if(this.usingKnownHelper)this.source.push(nextStack+" = "+id+".call("+paramString+");");else{this.context.aliases.functionType='"function"';var condition=program?"foundHelper && ":"";this.source.push("if("+condition+"typeof "+id+" === functionType) { "+nextStack+" = "+id+".call("+paramString+"); }")}fn.call(this,nextStack,helperMissingString,id),this.usingKnownHelper=!1},invokePartial:function(context){params=[this.nameLookup("partials",context,"partial"),"'"+context+"'",this.popStack(),"helpers","partials"],this.options.data&&params.push("data"),this.pushStack("self.invokePartial("+params.join(", ")+");")},assignToHash:function(key){var value=this.popStack(),hash=this.topStack();this.source.push(hash+"['"+key+"'] = "+value+";")},compiler:JavaScriptCompiler,compileChildren:function(environment,options){var children=environment.children,child,compiler;for(var i=0,l=children.length;i<l;i++){child=children[i],compiler=new this.compiler,this.context.programs.push("");var index=this.context.programs.length;child.index=index,child.name="program"+index,this.context.programs[index]=compiler.compile(child,options,this.context)}},programExpression:function(guid){if(guid==null)return"self.noop";var child=this.environment.children[guid],depths=child.depths.list,programParams=[child.index,child.name,"data"];for(var i=0,l=depths.length;i<l;i++)depth=depths[i],depth===1?programParams.push("depth0"):programParams.push("depth"+(depth-1));return depths.length===0?"self.program("+programParams.join(", ")+")":(programParams.shift(),"self.programWithDepth("+programParams.join(", ")+")")},register:function(name,val){this.useRegister(name),this.source.push(name+" = "+val+";")},useRegister:function(name){this.context.registers[name]||(this.context.registers[name]=!0,this.context.registers.list.push(name))},pushStack:function(item){return this.source.push(this.nextStack()+" = "+item+";"),"stack"+this.stackSlot},nextStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),"stack"+this.stackSlot},popStack:function(){return"stack"+this.stackSlot--},topStack:function(){return"stack"+this.stackSlot},quotedString:function(str){return'"'+str.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r")+'"'}};var reservedWords="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield".split(" "),compilerWords=JavaScriptCompiler.RESERVED_WORDS={};for(var i=0,l=reservedWords.length;i<l;i++)compilerWords[reservedWords[i]]=!0;JavaScriptCompiler.isValidJavaScriptVariableName=function(name){return!JavaScriptCompiler.RESERVED_WORDS[name]&&/^[a-zA-Z_$][0-9a-zA-Z_$]+$/.test(name)?!0:!1}}(Handlebars.Compiler,Handlebars.JavaScriptCompiler),Handlebars.precompile=function(string,options){options=options||{};var ast=Handlebars.parse(string),environment=(new Handlebars.Compiler).compile(ast,options);return(new Handlebars.JavaScriptCompiler).compile(environment,options)},Handlebars.compile=function(string,options){function compile(){var ast=Handlebars.parse(string),environment=(new Handlebars.Compiler).compile(ast,options),templateSpec=(new Handlebars.JavaScriptCompiler).compile(environment,options,undefined,!0);return Handlebars.template(templateSpec)}options=options||{};var compiled;return function(context,options){return compiled||(compiled=compile()),compiled.call(this,context,options)}},Handlebars.VM={template:function(templateSpec){var container={escapeExpression:Handlebars.Utils.escapeExpression,invokePartial:Handlebars.VM.invokePartial,programs:[],program:function(i,fn,data){var programWrapper=this.programs[i];return data?Handlebars.VM.program(fn,data):programWrapper?programWrapper:(programWrapper=this.programs[i]=Handlebars.VM.program(fn),programWrapper)},programWithDepth:Handlebars.VM.programWithDepth,noop:Handlebars.VM.noop};return function(context,options){return options=options||{},templateSpec.call(container,Handlebars,context,options.helpers,options.partials,options.data)}},programWithDepth:function(fn,data,$depth){var args=Array.prototype.slice.call(arguments,2);return function(context,options){return options=options||{},fn.apply(this,[context,options.data||data].concat(args))}},program:function(fn,data){return function(context,options){return options=options||{},fn(context,options.data||data)}},noop:function(){return""},invokePartial:function(partial,name,context,helpers,partials,data){options={helpers:helpers,partials:partials,data:data};if(partial===undefined)throw new Handlebars.Exception("The partial "+name+" could not be found");if(partial instanceof Function)return partial(context,options);if(!Handlebars.compile)throw new Handlebars.Exception("The partial "+name+" could not be compiled when running in runtime-only mode");return partials[name]=Handlebars.compile(partial),partials[name](context,options)}},Handlebars.template=Handlebars.VM.template,define("lib/handlebars",function(){}),define("controllers/_rulebase",["models/adminsetting","helpers/date","lib/text!views/message.tpl","lib/spine/spine","lib/handlebars"],function(AdminSetting,dateTool,message_template){var tmpl=Handlebars.compile(message_template);AdminSetting.fetch();var base=Spine.Controller.sub({canVote:function(){var setting=AdminSetting.findByAttribute("setting","voteweekend");if(setting!==null)return!0;switch(this.getDate().getDay()){case 1:case 2:case 3:case 4:case 5:return!0;case 6:case 0:return!1}},validate:function(){return this.canVote()?"":"Adding games and voting is not allowed on weekends."},showMessage:function(message,type){type=type||"alert",this.clearMessage();var model={message:message,type:type.length?"alert-"+type:""};$(".message-area:visible").html(tmpl(model))},showSimpleMessage:function(message){$(".message-area:visible").text(message)},showError:function(text){text=text||"Error processing request.",this.showMessage(text,"error")},clearMessage:function(){$(".message-area").empty()}});return base.prototype.getDate=dateTool.getDate,base}),define("models/daily",["lib/spine/spine","lib/spine/ajax","lib/spine/local"],function(){var Daily=Spine.Model.sub();return Daily.configure("Daily","day","added"),Daily.extend(Spine.Model.Local),Daily}),define("settings",[],function(){return{votingServiceUrl:"http://js.nrd.mn/challenge",apiKey:"bf374608e3a4b09799178cdcf6baef36f7790a85"}}),define("models/game",["settings","lib/spine/spine"],function(settings){if(window.Game)return window.Game;var Game=Spine.Model.sub();Game.configure("Game","id","title","votes","owned");var connect=function(method,cb,data,options){var handleCallBack=function(records){return cb&&cb(records),Game.trigger(method),records};if(options&&options.disableAjax)return handleCallBack();data=$.extend(data||{},{apiKey:settings.apiKey}),$.ajax({url:[settings.votingServiceUrl,method].join("/"),dataType:"jsonp",data:data,success:handleCallBack,error:function(e){console.log(e),Game.trigger("error")}})},scrubGameData=function(game){return{id:parseInt(game.id,10),owned:game.owned==="1",title:game.title,votes:parseInt(game.votes,10)}};return Game.include({vote:function(options,cb){connect("vote",cb,{id:this.id},options),this.updateAttribute("votes",this.votes+1)},setOwned:function(options,cb){connect("setgotit",cb,{id:this.id},options),this.updateAttribute("owned",!0)},save:function(options,cb){!this.exists()&&this.isValid()?(connect("addnewgame",cb,{title:this.title},options),this.constructor.__super__.create.apply(this)):this.constructor.__super__.update.apply(this)},validate:function(){if(this.title===undefined||this.title.replace(/\s/g,"").length===0)return"Game title must have a value.";if(Game.findByAttribute("title",this.title)!==null)return"Game title already exists."}}),Game.extend({clear:function(options,cb){Game.deleteAll(),connect("cleargames",cb,null,options)},fetch:function(options,cb){connect("getgames",function(records){if(records){for(var i=0;i<records.length;i++)records[i]=scrubGameData(records[i]);Game.deleteAll(),Game.refresh(records)}cb&&cb()},null,options)}}),window.Game=Game,Game}),define("controllers/dailies",["models/daily","models/game","models/adminsetting","helpers/date","lib/spine/spine"],function(Daily,Game,AdminSetting,dateTool){var Dailies=Spine.Controller.sub();return Daily.fetch(),Dailies.extend({isOpen:function(){if(AdminSetting.findByAttribute("setting","votedaily"))return!0;var daily=Daily.findByAttribute("day",dateTool.getFormattedString());return daily===null},validate:function(){return Dailies.isOpen()?"":"Cannot vote or add a game more than once a day"},setToday:function(){Dailies.isOpen()&&(new Daily({day:dateTool.getFormattedString(),added:new Date})).save()},clear:function(){Daily.deleteAll()},fetch:function(){return Daily.fetch()}}),Dailies}),define("controllers/gametitle",["controllers/_rulebase","controllers/dailies","settings"],function(Base,Dailies,settings){var GameTitle=Base.sub({tag:"tr",className:"game control-group",events:{"click .vote-action":"voteEvent","click .owned-action":"setOwnedEvent"},elements:{".error":"error"},init:function(){if(!this.item)throw"GameTitle must have an item"},render:function(template){return this.html(template(this.item))},voteEvent:function(e){e.preventDefault(),this.vote()},vote:function(options){var error=this.validate()||Dailies.validate();return error&&error.length?(this.showError(error),!1):(this.item.vote(options,this.proxy(function(){this.showMessage("Vote successfully cast.","success")})),!0)},setOwnedEvent:function(e){e.preventDefault(),this.setOwned()},setOwned:function(options){this.item.setOwned(options)}});return GameTitle}),define("helpers/sort",[],function(){var toLowerIfString=function(str){return typeof str=="string"?str.toLowerCase():str};return{byProperty:function(property){return function(a,b){var propertyA=toLowerIfString(a[property]),propertyB=toLowerIfString(b[property]);return propertyA<propertyB?-1:propertyA>propertyB?1:0}}}}),define("helpers/string",[],function(){return{ucFirst:function(str){return str.charAt(0).toUpperCase()+str.slice(1)}}}),define("lib/text!views/all_row.tpl",[],function(){return'<td>\n	{{title}}\n</td>\n<td>\n	{{votes}}\n</td>\n<td>\n	{{#unless owned}}\n	<button class="btn vote-action">Vote</button> \n	<button class="btn owned-action">Mark as owned</button>\n	<div class="error help-block">\n\n	</div>\n	{{/unless}}\n</td>'}),define("controllers/games",["controllers/_rulebase","controllers/gametitle","controllers/dailies","models/game","helpers/sort","helpers/string","lib/text!views/all_row.tpl"],function(Base,GameTitle,Dailies,Game,sort,string,all_row_template){var all_row_tmpl=Handlebars.compile(all_row_template),Games=Base.sub({el:$("#games tbody"),show:"All",elements:{"#games tbody":"rows","#tab-nav":"tabNav"},init:function(){Game.bind("create",Dailies.setToday),Game.bind("vote",Dailies.setToday),Game.bind("refresh",this.proxy(this.addSelected)),Game.bind("update",this.proxy(this.addSelected)),Game.bind("addnewgame",this.proxy(this.fetch)),Game.bind("error",this.proxy(this.showError))},fetch:function(){Game.fetch()},fetchOrShow:function(type){this.show=type,Game.all().length===0?this.fetch():this.addSelected()},addSelected:function(){this.proxy(this.addAll(this["get"+string.ucFirst(this.show)]()))},addOne:function(item){var title=new GameTitle({item:item});this.append(title.render(all_row_tmpl))},addAll:function(items){this.el.empty();if(items&&items.length){for(var i=0;i<items.length;i++)this.proxy(this.addOne(items[i]));this.el.parent().show()}else this.el.parent().hide(),this.showSimpleMessage("No games found.")},getAll:function(){return Game.all()},getOwned:function(){return Game.findAllByAttribute("owned",!0).sort(sort.byProperty("title"))},getUnowned:function(){return Game.findAllByAttribute("owned",!1).sort(sort.byProperty("votes")).reverse()},getWanted:function(){return this.getUnowned()}});return Games}),function(){var $,Spine,escapeRegExp,hashStrip,namedParam,splatParam,__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},__slice=[].slice;Spine=this.Spine||require("spine"),$=Spine.$,hashStrip=/^#*/,namedParam=/:([\w\d]+)/g,splatParam=/\*([\w\d]+)/g,escapeRegExp=/[-[\]{}()+?.,\\^$|#\s]/g,Spine.Route=function(_super){function Route(path,callback){var match;this.path=path,this.callback=callback,this.names=[];if(typeof path=="string"){namedParam.lastIndex=0;while((match=namedParam.exec(path))!==null)this.names.push(match[1]);splatParam.lastIndex=0;while((match=splatParam.exec(path))!==null)this.names.push(match[1]);path=path.replace(escapeRegExp,"\\$&").replace(namedParam,"([^/]*)").replace(splatParam,"(.*?)"),this.route=new RegExp("^"+path+"$")}else this.route=path}var _ref;return __extends(Route,_super),Route.extend(Spine.Events),Route.historySupport=((_ref=window.history)!=null?_ref.pushState:void 0)!=null,Route.routes=[],Route.options={trigger:!0,history:!1,shim:!1},Route.add=function(path,callback){var key,value,_results;if(typeof path!="object"||path instanceof RegExp)return this.routes.push(new this(path,callback));_results=[];for(key in path)value=path[key],_results.push(this.add(key,value));return _results},Route.setup=function(options){options==null&&(options={}),this.options=$.extend({},this.options,options),this.options.history&&(this.history=this.historySupport&&this.options.history);if(this.options.shim)return;return this.history?$(window).bind("popstate",this.change):$(window).bind("hashchange",this.change),this.change()},Route.unbind=function(){return this.history?$(window).unbind("popstate",this.change):$(window).unbind("hashchange",this.change)},Route.navigate=function(){var args,lastArg,options,path;args=1<=arguments.length?__slice.call(arguments,0):[],options={},lastArg=args[args.length-1],typeof lastArg=="object"?options=args.pop():typeof lastArg=="boolean"&&(options.trigger=args.pop()),options=$.extend({},this.options,options),path=args.join("/");if(this.path===path)return;this.path=path,this.trigger("navigate",this.path),options.trigger&&this.matchRoute(this.path,options);if(options.shim)return;return this.history?history.pushState({},document.title,this.path):window.location.hash=this.path},Route.getPath=function(){var path;return path=window.location.pathname,path.substr(0,1)!=="/"&&(path="/"+path),path},Route.getHash=function(){return window.location.hash},Route.getFragment=function(){return this.getHash().replace(hashStrip,"")},Route.getHost=function(){return(document.location+"").replace(this.getPath()+this.getHash(),"")},Route.change=function(){var path;path=this.getFragment()!==""?this.getFragment():this.getPath();if(path===this.path)return;return this.path=path,this.matchRoute(this.path)},Route.matchRoute=function(path,options){var route,_i,_len,_ref1;_ref1=this.routes;for(_i=0,_len=_ref1.length;_i<_len;_i++){route=_ref1[_i];if(route.match(path,options))return this.trigger("change",route,path),route}},Route.prototype.match=function(path,options){var i,match,param,params,_i,_len;options==null&&(options={}),match=this.route.exec(path);if(!match)return!1;options.match=match,params=match.slice(1);if(this.names.length)for(i=_i=0,_len=params.length;_i<_len;i=++_i)param=params[i],options[this.names[i]]=param;return this.callback.call(null,options)!==!1},Route}(Spine.Module),Spine.Route.change=Spine.Route.proxy(Spine.Route.change),Spine.Controller.include({route:function(path,callback){return Spine.Route.add(path,this.proxy(callback))},routes:function(routes){var key,value,_results;_results=[];for(key in routes)value=routes[key],_results.push(this.route(key,value));return _results},navigate:function(){return Spine.Route.navigate.apply(Spine.Route,arguments)}}),typeof module!="undefined"&&module!==null&&(module.exports=Spine.Route)}.call(this),define("lib/spine/route",function(){}),define("controllers/home",["controllers/_rulebase","controllers/dailies","controllers/games","models/game","lib/spine/route"],function(Base,Dailies,Games,Game){var Home=Base.sub({el:".home-content",events:{"keypress #addGame":"keypressEvent","click #submitAddGame":"addGameEvent"},elements:{"#addGame":"addGameInput","#addGameSubmit":"addGameSubmit","#errorMessage":"errorMessage","#globalError":"globalError"},init:function(){this.games=new Games},keypressEvent:function(e){e.keyCode===13&&(e.preventDefault(),this.addGame(this.addGameInput.val()))},addGameEvent:function(e){e.preventDefault(),this.addGame(this.addGameInput.val())},addGame:function(title,options){var game=new Game({title:title}),error=this.validate()||Dailies.validate()||game.validate();return error&&error.length?(this.showError(error),!1):(game.save(options,this.proxy(function(){this.showMessage("Game added!","success")})),this.addGameInput.val(""),!0)},showGames:function(type){type=type||"all",this.games.fetchOrShow(type),this.updateMenu(type)},updateMenu:function(type){$("#tab-nav li").removeClass("active").filter("."+type+"-tab").addClass("active")}});return Home}),define("lib/text!views/admin.tpl",[],function(){return'<h2>Secured Admin Area</h2>\n<form class="well">\n	<label class="checkbox">\n		<input type="checkbox" data-setting="voteweekend" {{#if voteweekend}}checked="checked"{{/if}}/> Allow voting and adding games on weekends\n	</label>\n	<label class="checkbox">\n		<input type="checkbox" data-setting="votedaily" {{#if votedaily}}checked="checked"{{/if}} /> Allow voting and adding games more than once per day\n	</label>\n	<div class="button-box">\n		<button href="#" id="clearDaily" class="confirm btn" data-confirm-message="Are you sure you want to clear the daily token?">Clear Daily Token</button>\n		<button href="#" id="clearGames" class="confirm btn btn-danger" data-confirm-message="Are you sure you want to clear the game list?">Clear Game List</button>\n	</div>\n</form>\n\n<div class="message-area">\n</div>'}),define("controllers/admin",["controllers/_rulebase","controllers/dailies","models/game","models/adminsetting","lib/text!views/admin.tpl","lib/spine/spine","lib/spine/route","lib/handlebars"],function(Base,Dailies,Game,AdminSetting,adminTemplate){var adminTmpl=Handlebars.compile(adminTemplate),Admin=Base.sub({el:".admin-content",events:{"click #clearGames":"clearGamesEvent","click #clearDaily":"clearDailyEvent","change :checkbox":"changeSettingEvent"},elements:{"#admin-pill":"adminPill"},init:function(){AdminSetting.fetch(),this.render()},changeSettingEvent:function(e){AdminSetting.destroyAll(),this.getSettings().each(function(idx,setting){(new AdminSetting({setting:setting})).save()})},_confirm:function(e,func){e.preventDefault();var target=$(e.currentTarget);confirm(target.data("confirm-message"))&&func()},clearGamesEvent:function(e){this._confirm(e,this.proxy(function(){this.clearGames(),this.showMessage("All games cleared.","block")}))},clearDailyEvent:function(e){this._confirm(e,this.proxy(function(){this.clearDaily(),this.showMessage("Daily token cleared","block")}))},clearGames:function(options){Game.clear(options)},clearDaily:function(){Dailies.clear()},getSettings:function(){return this.el.find(":checkbox:checked").map(function(){var setting=$(this).data("setting");if(setting&&setting.length)return setting})},render:function(){var settings={},local=AdminSetting.toJSON();for(var i=0;i<local.length;i++)settings[local[i].setting]=!0;this.append(adminTmpl(settings))}});return Admin}),!function($){$(function(){$.support.transition=function(){var transitionEnd=function(){var el=document.createElement("bootstrap"),transEndEventNames={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd",transition:"transitionend"},name;for(name in transEndEventNames)if(el.style[name]!==undefined)return transEndEventNames[name]}();return transitionEnd&&{end:transitionEnd}}()})}(window.jQuery),!function($){var dismiss='[data-dismiss="alert"]',Alert=function(el){$(el).on("click",dismiss,this.close)};Alert.prototype.close=function(e){function removeElement(){$parent.trigger("closed").remove()}var $this=$(this),selector=$this.attr("data-target"),$parent;selector||(selector=$this.attr("href"),selector=selector&&selector.replace(/.*(?=#[^\s]*$)/,"")),$parent=$(selector),e&&e.preventDefault(),$parent.length||($parent=$this.hasClass("alert")?$this:$this.parent()),$parent.trigger(e=$.Event("close"));if(e.isDefaultPrevented())return;$parent.removeClass("in"),$.support.transition&&$parent.hasClass("fade")?$parent.on($.support.transition.end,removeElement):removeElement()},$.fn.alert=function(option){return this.each(function(){var $this=$(this),data=$this.data("alert");data||$this.data("alert",data=new Alert(this)),typeof option=="string"&&data[option].call($this)})},$.fn.alert.Constructor=Alert,$(function(){$("body").on("click.alert.data-api",dismiss,Alert.prototype.close)})}(window.jQuery),!function($){var Button=function(element,options){this.$element=$(element),this.options=$.extend({},$.fn.button.defaults,options)};Button.prototype.setState=function(state){var d="disabled",$el=this.$element,data=$el.data(),val=$el.is("input")?"val":"html";state+="Text",data.resetText||$el.data("resetText",$el[val]()),$el[val](data[state]||this.options[state]),setTimeout(function(){state=="loadingText"?$el.addClass(d).attr(d,d):$el.removeClass(d).removeAttr(d)},0)},Button.prototype.toggle=function(){var $parent=this.$element.parent('[data-toggle="buttons-radio"]');$parent&&$parent.find(".active").removeClass("active"),this.$element.toggleClass("active")},$.fn.button=function(option){return this.each(function(){var $this=$(this),data=$this.data("button"),options=typeof option=="object"&&option;data||$this.data("button",data=new Button(this,options)),option=="toggle"?data.toggle():option&&data.setState(option)})},$.fn.button.defaults={loadingText:"loading..."},$.fn.button.Constructor=Button,$(function(){$("body").on("click.button.data-api","[data-toggle^=button]",function(e){var $btn=$(e.target);$btn.hasClass("btn")||($btn=$btn.closest(".btn")),$btn.button("toggle")})})}(window.jQuery),!function($){var Carousel=function(element,options){this.$element=$(element),this.options=options,this.options.slide&&this.slide(this.options.slide),this.options.pause=="hover"&&this.$element.on("mouseenter",$.proxy(this.pause,this)).on("mouseleave",$.proxy(this.cycle,this))};Carousel.prototype={cycle:function(e){return e||(this.paused=!1),this.options.interval&&!this.paused&&(this.interval=setInterval($.proxy(this.next,this),this.options.interval)),this},to:function(pos){var $active=this.$element.find(".active"),children=$active.parent().children(),activePos=children.index($active),that=this;if(pos>children.length-1||pos<0)return;return this.sliding?this.$element.one("slid",function(){that.to(pos)}):activePos==pos?this.pause().cycle():this.slide(pos>activePos?"next":"prev",$(children[pos]))},pause:function(e){return e||(this.paused=!0),clearInterval(this.interval),this.interval=null,this},next:function(){if(this.sliding)return;return this.slide("next")},prev:function(){if(this.sliding)return;return this.slide("prev")},slide:function(type,next){var $active=this.$element.find(".active"),$next=next||$active[type](),isCycling=this.interval,direction=type=="next"?"left":"right",fallback=type=="next"?"first":"last",that=this,e=$.Event("slide");this.sliding=!0,isCycling&&this.pause(),$next=$next.length?$next:this.$element.find(".item")[fallback]();if($next.hasClass("active"))return;if($.support.transition&&this.$element.hasClass("slide")){this.$element.trigger(e);if(e.isDefaultPrevented())return;$next.addClass(type),$next[0].offsetWidth,$active.addClass(direction),$next.addClass(direction),this.$element.one($.support.transition.end,function(){$next.removeClass([type,direction].join(" ")).addClass("active"),$active.removeClass(["active",direction].join(" ")),that.sliding=!1,setTimeout(function(){that.$element.trigger("slid")},0)})}else{this.$element.trigger(e);if(e.isDefaultPrevented())return;$active.removeClass("active"),$next.addClass("active"),this.sliding=!1,this.$element.trigger("slid")}return isCycling&&this.cycle(),this}},$.fn.carousel=function(option){return this.each(function(){var $this=$(this),data=$this.data("carousel"),options=$.extend({},$.fn.carousel.defaults,typeof option=="object"&&option);data||$this.data("carousel",data=new Carousel(this,options)),typeof option=="number"?data.to(option):typeof option=="string"||(option=options.slide)?data[option]():options.interval&&data.cycle()})},$.fn.carousel.defaults={interval:5e3,pause:"hover"},$.fn.carousel.Constructor=Carousel,$(function(){$("body").on("click.carousel.data-api","[data-slide]",function(e){var $this=$(this),href,$target=$($this.attr("data-target")||(href=$this.attr("href"))&&href.replace(/.*(?=#[^\s]+$)/,"")),options=!$target.data("modal")&&$.extend({},$target.data(),$this.data());$target.carousel(options),e.preventDefault()})})}(window.jQuery),!function($){var Collapse=function(element,options){this.$element=$(element),this.options=$.extend({},$.fn.collapse.defaults,options),this.options.parent&&(this.$parent=$(this.options.parent)),this.options.toggle&&this.toggle()};Collapse.prototype={constructor:Collapse,dimension:function(){var hasWidth=this.$element.hasClass("width");return hasWidth?"width":"height"},show:function(){var dimension,scroll,actives,hasData;if(this.transitioning)return;dimension=this.dimension(),scroll=$.camelCase(["scroll",dimension].join("-")),actives=this.$parent&&this.$parent.find("> .accordion-group > .in");if(actives&&actives.length){hasData=actives.data("collapse");if(hasData&&hasData.transitioning)return;actives.collapse("hide"),hasData||actives.data("collapse",null)}this.$element[dimension](0),this.transition("addClass",$.Event("show"),"shown"),this.$element[dimension](this.$element[0][scroll])},hide:function(){var dimension;if(this.transitioning)return;dimension=this.dimension(),this.reset(this.$element[dimension]()),this.transition("removeClass",$.Event("hide"),"hidden"),this.$element[dimension](0)},reset:function(size){var dimension=this.dimension();return this.$element.removeClass("collapse")[dimension](size||"auto")[0].offsetWidth,this.$element[size!==null?"addClass":"removeClass"]("collapse"),this},transition:function(method,startEvent,completeEvent){var that=this,complete=function(){startEvent.type=="show"&&that.reset(),that.transitioning=0,that.$element.trigger(completeEvent)};this.$element.trigger(startEvent);if(startEvent.isDefaultPrevented())return;this.transitioning=1,this.$element[method]("in"),$.support.transition&&this.$element.hasClass("collapse")?this.$element.one($.support.transition.end,complete):complete()},toggle:function(){this[this.$element.hasClass("in")?"hide":"show"]()}},$.fn.collapse=function(option){return this.each(function(){var $this=$(this),data=$this.data("collapse"),options=typeof option=="object"&&option;data||$this.data("collapse",data=new Collapse(this,options)),typeof option=="string"&&data[option]()})},$.fn.collapse.defaults={toggle:!0},$.fn.collapse.Constructor=Collapse,$(function(){$("body").on("click.collapse.data-api","[data-toggle=collapse]",function(e){var $this=$(this),href,target=$this.attr("data-target")||e.preventDefault()||(href=$this.attr("href"))&&href.replace(/.*(?=#[^\s]+$)/,""),option=$(target).data("collapse")?"toggle":$this.data();$(target).collapse(option)})})}(window.jQuery),!function($){function clearMenus(){$(toggle).parent().removeClass("open")}var toggle='[data-toggle="dropdown"]',Dropdown=function(element){var $el=$(element).on("click.dropdown.data-api",this.toggle);$("html").on("click.dropdown.data-api",function(){$el.parent().removeClass("open")})};Dropdown.prototype={constructor:Dropdown,toggle:function(e){var $this=$(this),$parent,selector,isActive;if($this.is(".disabled, :disabled"))return;return selector=$this.attr("data-target"),selector||(selector=$this.attr("href"),selector=selector&&selector.replace(/.*(?=#[^\s]*$)/,"")),$parent=$(selector),$parent.length||($parent=$this.parent()),isActive=$parent.hasClass("open"),clearMenus(),isActive||$parent.toggleClass("open"),!1}},$.fn.dropdown=function(option){return this.each(function(){var $this=$(this),data=$this.data("dropdown");data||$this.data("dropdown",data=new Dropdown(this)),typeof option=="string"&&data[option].call($this)})},$.fn.dropdown.Constructor=Dropdown,$(function(){$("html").on("click.dropdown.data-api",clearMenus),$("body").on("click.dropdown",".dropdown form",function(e){e.stopPropagation()}).on("click.dropdown.data-api",toggle,Dropdown.prototype.toggle)})}(window.jQuery),!function($){function hideWithTransition(){var that=this,timeout=setTimeout(function(){that.$element.off($.support.transition.end),hideModal.call(that)},500);this.$element.one($.support.transition.end,function(){clearTimeout(timeout),hideModal.call(that)})}function hideModal(that){this.$element.hide().trigger("hidden"),backdrop.call(this)}function backdrop(callback){var that=this,animate=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var doAnimate=$.support.transition&&animate;this.$backdrop=$('<div class="modal-backdrop '+animate+'" />').appendTo(document.body),this.options.backdrop!="static"&&this.$backdrop.click($.proxy(this.hide,this)),doAnimate&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),doAnimate?this.$backdrop.one($.support.transition.end,callback):callback()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),$.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one($.support.transition.end,$.proxy(removeBackdrop,this)):removeBackdrop.call(this)):callback&&callback()}function removeBackdrop(){this.$backdrop.remove(),this.$backdrop=null}function escape(){var that=this;this.isShown&&this.options.keyboard?$(document).on("keyup.dismiss.modal",function(e){e.which==27&&that.hide()}):this.isShown||$(document).off("keyup.dismiss.modal")}var Modal=function(content,options){this.options=options,this.$element=$(content).delegate('[data-dismiss="modal"]',"click.dismiss.modal",$.proxy(this.hide,this))};Modal.prototype={constructor:Modal,toggle:function(){return this[this.isShown?"hide":"show"]()},show:function(){var that=this,e=$.Event("show");this.$element.trigger(e);if(this.isShown||e.isDefaultPrevented())return;$("body").addClass("modal-open"),this.isShown=!0,escape.call(this),backdrop.call(this,function(){var transition=$.support.transition&&that.$element.hasClass("fade");that.$element.parent().length||that.$element.appendTo(document.body),that.$element.show(),transition&&that.$element[0].offsetWidth,that.$element.addClass("in"),transition?that.$element.one($.support.transition.end,function(){that.$element.trigger("shown")}):that.$element.trigger("shown")})},hide:function(e){e&&e.preventDefault();var that=this;e=$.Event("hide"),this.$element.trigger(e);if(!this.isShown||e.isDefaultPrevented())return;this.isShown=!1,$("body").removeClass("modal-open"),escape.call(this),this.$element.removeClass("in"),$.support.transition&&this.$element.hasClass("fade")?hideWithTransition.call(this):hideModal.call(this)}},$.fn.modal=function(option){return this.each(function(){var $this=$(this),data=$this.data("modal"),options=$.extend({},$.fn.modal.defaults,$this.data(),typeof option=="object"&&option);data||$this.data("modal",data=new Modal(this,options)),typeof option=="string"?data[option]():options.show&&data.show()})},$.fn.modal.defaults={backdrop:!0,keyboard:!0,show:!0},$.fn.modal.Constructor=Modal,$(function(){$("body").on("click.modal.data-api",'[data-toggle="modal"]',function(e){var $this=$(this),href,$target=$($this.attr("data-target")||(href=$this.attr("href"))&&href.replace(/.*(?=#[^\s]+$)/,"")),option=$target.data("modal")?"toggle":$.extend({},$target.data(),$this.data());e.preventDefault(),$target.modal(option)})})}(window.jQuery),!function($){var Tooltip=function(element,options){this.init("tooltip",element,options)};Tooltip.prototype={constructor:Tooltip,init:function(type,element,options){var eventIn,eventOut;this.type=type,this.$element=$(element),this.options=this.getOptions(options),this.enabled=!0,this.options.trigger!="manual"&&(eventIn=this.options.trigger=="hover"?"mouseenter":"focus",eventOut=this.options.trigger=="hover"?"mouseleave":"blur",this.$element.on(eventIn,this.options.selector,$.proxy(this.enter,this)),this.$element.on(eventOut,this.options.selector,$.proxy(this.leave,this))),this.options.selector?this._options=$.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(options){return options=$.extend({},$.fn[this.type].defaults,options,this.$element.data()),options.delay&&typeof options.delay=="number"&&(options.delay={show:options.delay,hide:options.delay}),options},enter:function(e){var self=$(e.currentTarget)[this.type](this._options).data(this.type);if(!self.options.delay||!self.options.delay.show)return self.show();clearTimeout(this.timeout),self.hoverState="in",this.timeout=setTimeout(function(){self.hoverState=="in"&&self.show()},self.options.delay.show)},leave:function(e){var self=$(e.currentTarget)[this.type](this._options).data(this.type);this.timeout&&clearTimeout(this.timeout);if(!self.options.delay||!self.options.delay.hide)return self.hide();self.hoverState="out",this.timeout=setTimeout(function(){self.hoverState=="out"&&self.hide()},self.options.delay.hide)},show:function(){var $tip,inside,pos,actualWidth,actualHeight,placement,tp;if(this.hasContent()&&this.enabled){$tip=this.tip(),this.setContent(),this.options.animation&&$tip.addClass("fade"),placement=typeof this.options.placement=="function"?this.options.placement.call(this,$tip[0],this.$element[0]):this.options.placement,inside=/in/.test(placement),$tip.remove().css({top:0,left:0,display:"block"}).appendTo(inside?this.$element:document.body),pos=this.getPosition(inside),actualWidth=$tip[0].offsetWidth,actualHeight=$tip[0].offsetHeight;switch(inside?placement.split(" ")[1]:placement){case"bottom":tp={top:pos.top+pos.height,left:pos.left+pos.width/2-actualWidth/2};break;case"top":tp={top:pos.top-actualHeight,left:pos.left+pos.width/2-actualWidth/2};break;case"left":tp={top:pos.top+pos.height/2-actualHeight/2,left:pos.left-actualWidth};break;case"right":tp={top:pos.top+pos.height/2-actualHeight/2,left:pos.left+pos.width}}$tip.css(tp).addClass(placement).addClass("in")}},isHTML:function(text){return typeof text!="string"||text.charAt(0)==="<"&&text.charAt(text.length-1)===">"&&text.length>=3||/^(?:[^<]*<[\w\W]+>[^>]*$)/.exec(text)},setContent:function(){var $tip=this.tip(),title=this.getTitle();$tip.find(".tooltip-inner")[this.isHTML(title)?"html":"text"](title),$tip.removeClass("fade in top bottom left right")},hide:function(){function removeWithAnimation(){var timeout=setTimeout(function(){$tip.off($.support.transition.end).remove()},500);$tip.one($.support.transition.end,function(){clearTimeout(timeout),$tip.remove()})}var that=this,$tip=this.tip();$tip.removeClass("in"),$.support.transition&&this.$tip.hasClass("fade")?removeWithAnimation():$tip.remove()},fixTitle:function(){var $e=this.$element;($e.attr("title")||typeof $e.attr("data-original-title")!="string")&&$e.attr("data-original-title",$e.attr("title")||"").removeAttr("title")},hasContent:function(){return this.getTitle()},getPosition:function(inside){return $.extend({},inside?{top:0,left:0}:this.$element.offset(),{width:this.$element[0].offsetWidth,height:this.$element[0].offsetHeight})},getTitle:function(){var title,$e=this.$element,o=this.options;return title=$e.attr("data-original-title")||(typeof o.title=="function"?o.title.call($e[0]):o.title),title},tip:function(){return this.$tip=this.$tip||$(this.options.template)},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(){this[this.tip().hasClass("in")?"hide":"show"]()}},$.fn.tooltip=function(option){return this.each(function(){var $this=$(this),data=$this.data("tooltip"),options=typeof option=="object"&&option;data||$this.data("tooltip",data=new Tooltip(this,options)),typeof option=="string"&&data[option]()})},$.fn.tooltip.Constructor=Tooltip,$.fn.tooltip.defaults={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover",title:"",delay:0}}(window.jQuery),!function($){var Popover=function(element,options){this.init("popover",element,options)};Popover.prototype=$.extend({},$.fn.tooltip.Constructor.prototype,{constructor:Popover,setContent:function(){var $tip=this.tip(),title=this.getTitle(),content=this.getContent();$tip.find(".popover-title")[this.isHTML(title)?"html":"text"](title),$tip.find(".popover-content > *")[this.isHTML(content)?"html":"text"](content),$tip.removeClass("fade top bottom left right in")},hasContent:function(){return this.getTitle()||this.getContent()},getContent:function(){var content,$e=this.$element,o=this.options;return content=$e.attr("data-content")||(typeof o.content=="function"?o.content.call($e[0]):o.content),content},tip:function(){return this.$tip||(this.$tip=$(this.options.template)),this.$tip}}),$.fn.popover=function(option){return this.each(function(){var $this=$(this),data=$this.data("popover"),options=typeof option=="object"&&option;data||$this.data("popover",data=new Popover(this,options)),typeof option=="string"&&data[option]()})},$.fn.popover.Constructor=Popover,$.fn.popover.defaults=$.extend({},$.fn.tooltip.defaults,{placement:"right",content:"",template:'<div class="popover"><div class="arrow"></div><div class="popover-inner"><h3 class="popover-title"></h3><div class="popover-content"><p></p></div></div></div>'})}(window.jQuery),!function($){function ScrollSpy(element,options){var process=$.proxy(this.process,this),$element=$(element).is("body")?$(window):$(element),href;this.options=$.extend({},$.fn.scrollspy.defaults,options),this.$scrollElement=$element.on("scroll.scroll.data-api",process),this.selector=(this.options.target||(href=$(element).attr("href"))&&href.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li > a",this.$body=$("body"),this.refresh(),this.process()}ScrollSpy.prototype={constructor:ScrollSpy,refresh:function(){var self=this,$targets;this.offsets=$([]),this.targets=$([]),$targets=this.$body.find(this.selector).map(function(){var $el=$(this),href=$el.data("target")||$el.attr("href"),$href=/^#\w/.test(href)&&$(href);return $href&&href.length&&[[$href.position().top,href]]||null}).sort(function(a,b){return a[0]-b[0]}).each(function(){self.offsets.push(this[0]),self.targets.push(this[1])})},process:function(){var scrollTop=this.$scrollElement.scrollTop()+this.options.offset,scrollHeight=this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight,maxScroll=scrollHeight-this.$scrollElement.height(),offsets=this.offsets,targets=this.targets,activeTarget=this.activeTarget,i;if(scrollTop>=maxScroll)return activeTarget!=(i=targets.last()[0])&&this.activate(i);for(i=offsets.length;i--;)activeTarget!=targets[i]&&scrollTop>=offsets[i]&&(!offsets[i+1]||scrollTop<=offsets[i+1])&&this.activate(targets[i])},activate:function(target){var active,selector;this.activeTarget=target,$(this.selector).parent(".active").removeClass("active"),selector=this.selector+'[data-target="'+target+'"],'+this.selector+'[href="'+target+'"]',active=$(selector).parent("li").addClass("active"),active.parent(".dropdown-menu")&&(active=active.closest("li.dropdown").addClass("active")),active.trigger("activate")}},$.fn.scrollspy=function(option){return this.each(function(){var $this=$(this),data=$this.data("scrollspy"),options=typeof option=="object"&&option;data||$this.data("scrollspy",data=new ScrollSpy(this,options)),typeof option=="string"&&data[option]()})},$.fn.scrollspy.Constructor=ScrollSpy,$.fn.scrollspy.defaults={offset:10},$(function(){$('[data-spy="scroll"]').each(function(){var $spy=$(this);$spy.scrollspy($spy.data())})})}(window.jQuery),!function($){var Tab=function(element){this.element=$(element)};Tab.prototype={constructor:Tab,show:function(){var $this=this.element,$ul=$this.closest("ul:not(.dropdown-menu)"),selector=$this.attr("data-target"),previous,$target,e;selector||(selector=$this.attr("href"),selector=selector&&selector.replace(/.*(?=#[^\s]*$)/,""));if($this.parent("li").hasClass("active"))return;previous=$ul.find(".active a").last()[0],e=$.Event("show",{relatedTarget:previous}),$this.trigger(e);if(e.isDefaultPrevented())return;$target=$(selector),this.activate($this.parent("li"),$ul),this.activate($target,$target.parent(),function(){$this.trigger({type:"shown",relatedTarget:previous})})},activate:function(element,container,callback){function next(){$active.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),element.addClass("active"),transition?(element[0].offsetWidth,element.addClass("in")):element.removeClass("fade"),element.parent(".dropdown-menu")&&element.closest("li.dropdown").addClass("active"),callback&&callback()}var $active=container.find("> .active"),transition=callback&&$.support.transition&&$active.hasClass("fade");transition?$active.one($.support.transition.end,next):next(),$active.removeClass("in")}},$.fn.tab=function(option){return this.each(function(){var $this=$(this),data=$this.data("tab");data||$this.data("tab",data=new Tab(this)),typeof option=="string"&&data[option]()})},$.fn.tab.Constructor=Tab,$(function(){$("body").on("click.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(e){e.preventDefault(),$(this).tab("show")})})}(window.jQuery),!function($){var Typeahead=function(element,options){this.$element=$(element),this.options=$.extend({},$.fn.typeahead.defaults,options),this.matcher=this.options.matcher||this.matcher,this.sorter=this.options.sorter||this.sorter,this.highlighter=this.options.highlighter||this.highlighter,this.updater=this.options.updater||this.updater,this.$menu=$(this.options.menu).appendTo("body"),this.source=this.options.source,this.shown=!1,this.listen()};Typeahead.prototype={constructor:Typeahead,select:function(){var val=this.$menu.find(".active").attr("data-value");return this.$element.val(this.updater(val)).change(),this.hide()},updater:function(item){return item},show:function(){var pos=$.extend({},this.$element.offset(),{height:this.$element[0].offsetHeight});return this.$menu.css({top:pos.top+pos.height,left:pos.left}),this.$menu.show(),this.shown=!0,this},hide:function(){return this.$menu.hide(),this.shown=!1,this},lookup:function(event){var that=this,items,q;return this.query=this.$element.val(),this.query?(items=$.grep(this.source,function(item){return that.matcher(item)}),items=this.sorter(items),items.length?this.render(items.slice(0,this.options.items)).show():this.shown?this.hide():this):this.shown?this.hide():this},matcher:function(item){return~item.toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(items){var beginswith=[],caseSensitive=[],caseInsensitive=[],item;while(item=items.shift())item.toLowerCase().indexOf(this.query.toLowerCase())?~item.indexOf(this.query)?caseSensitive.push(item):caseInsensitive.push(item):beginswith.push(item);return beginswith.concat(caseSensitive,caseInsensitive)},highlighter:function(item){var query=this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");return item.replace(new RegExp("("+query+")","ig"),function($1,match){return"<strong>"+match+"</strong>"})},render:function(items){var that=this;return items=$(items).map(function(i,item){return i=$(that.options.item).attr("data-value",item),i.find("a").html(that.highlighter(item)),i[0]}),items.first().addClass("active"),this.$menu.html(items),this},next:function(event){var active=this.$menu.find(".active").removeClass("active"),next=active.next();next.length||(next=$(this.$menu.find("li")[0])),next.addClass("active")},prev:function(event){var active=this.$menu.find(".active").removeClass("active"),prev=active.prev();prev.length||(prev=this.$menu.find("li").last()),prev.addClass("active")},listen:function(){this.$element.on("blur",$.proxy(this.blur,this)).on("keypress",$.proxy(this.keypress,this)).on("keyup",$.proxy(this.keyup,this)),($.browser.webkit||$.browser.msie)&&this.$element.on("keydown",$.proxy(this.keypress,this)),this.$menu.on("click",$.proxy(this.click,this)).on("mouseenter","li",$.proxy(this.mouseenter,this))},keyup:function(e){switch(e.keyCode){case 40:case 38:break;case 9:case 13:if(!this.shown)return;this.select();break;case 27:if(!this.shown)return;this.hide();break;default:this.lookup()}e.stopPropagation(),e.preventDefault()},keypress:function(e){if(!this.shown)return;switch(e.keyCode){case 9:case 13:case 27:e.preventDefault();break;case 38:if(e.type!="keydown")break;e.preventDefault(),this.prev();break;case 40:if(e.type!="keydown")break;e.preventDefault(),this.next()}e.stopPropagation()},blur:function(e){var that=this;setTimeout(function(){that.hide()},150)},click:function(e){e.stopPropagation(),e.preventDefault(),this.select()},mouseenter:function(e){this.$menu.find(".active").removeClass("active"),$(e.currentTarget).addClass("active")}},$.fn.typeahead=function(option){return this.each(function(){var $this=$(this),data=$this.data("typeahead"),options=typeof option=="object"&&option;data||$this.data("typeahead",data=new Typeahead(this,options)),typeof option=="string"&&data[option]()})},$.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu"></ul>',item:'<li><a href="#"></a></li>'},$.fn.typeahead.Constructor=Typeahead,$(function(){$("body").on("focus.typeahead.data-api",'[data-provide="typeahead"]',function(e){var $this=$(this);if($this.data("typeahead"))return;e.preventDefault(),$this.typeahead($this.data())})})}(window.jQuery),define("lib/bootstrap",function(){}),requirejs.config({baseUrl:"scripts"}),require(["controllers/home","controllers/admin","lib/handlebars","lib/spine/spine","lib/bootstrap"],function(Home,Admin){require(["lib/spine/manager","lib/spine/route"],function(){var App=Spine.Stack.sub({className:"app",el:"body",controllers:{home:Home,admin:Admin},routes:{"/":function(){this.clearMessage(),this.home.showGames(),this.home.active(),this.updateMenu("home")},"/games/:type":function(params){this.clearMessage(),this.home.showGames(params.type),this.home.active(),this.updateMenu("home")},"/admin":function(){this.clearMessage(),this.admin.active(),this.updateMenu("admin")}},updateMenu:function(type){$("#home-pill, #admin-pill").removeClass("active"),$("#"+type+"-pill").addClass("active")},clearMessage:function(){$("#message-area").empty()}}),app=new App;Spine.Route.setup()})}),define("app",function(){})